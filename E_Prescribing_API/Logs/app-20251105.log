2025-11-05T00:46:36.3192596+02:00  [INF] User profile is available. Using '"C:\Users\ThatoTs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-11-05T00:46:36.5987102+02:00  [INF] Now listening on: "https://localhost:7150" (d826f4b8)
2025-11-05T00:46:36.6009914+02:00  [INF] Now listening on: "http://localhost:5031" (d826f4b8)
2025-11-05T00:46:36.6613447+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-11-05T00:46:36.6645528+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-11-05T00:46:36.6666270+02:00  [INF] Content root path: "D:\HomeSpace\E_Prescribing_API\E_Prescribing_API" (cc26f24e)
2025-11-05T00:46:37.7616136+02:00 0HNGRUG1CHN2J:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - null null (d509f86a)
2025-11-05T00:46:37.9390621+02:00 0HNGRUG1CHN2J:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - 301 0 null 185.1067ms (74253ad3)
2025-11-05T00:46:37.9654914+02:00 0HNGRUG1CHN2J:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - null null (d509f86a)
2025-11-05T00:46:38.0470335+02:00 0HNGRUG1CHN2J:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 81.6553ms (74253ad3)
2025-11-05T00:46:38.0823017+02:00 0HNGRUG1CHN2J:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-11-05T00:46:38.0870981+02:00 0HNGRUG1CHN2J:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - 200 13770 "application/javascript; charset=utf-8" 5.2138ms (74253ad3)
2025-11-05T00:46:38.0898921+02:00 0HNGRUG1CHN2J:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - null null (d509f86a)
2025-11-05T00:46:38.0923144+02:00 0HNGRUG1CHN2J:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - null null (d509f86a)
2025-11-05T00:46:38.1066873+02:00 0HNGRUG1CHN2J:00000009 [INF] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T00:46:38.1069510+02:00 0HNGRUG1CHN2J:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 17.3796ms (74253ad3)
2025-11-05T00:46:38.1367928+02:00 0HNGRUG1CHN2J:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 44.743ms (74253ad3)
2025-11-05T00:46:38.2103568+02:00 0HNGRUG1CHN2J:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-32x32.png""" - null null (d509f86a)
2025-11-05T00:46:38.2117958+02:00 0HNGRUG1CHN2J:0000000D [INF] Sending file. Request path: '"/favicon-32x32.png"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T00:46:38.2119147+02:00 0HNGRUG1CHN2J:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-32x32.png""" - 200 628 "image/png" 1.973ms (74253ad3)
2025-11-05T00:46:38.2458935+02:00 0HNGRUG1CHN2J:0000000F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-11-05T00:46:38.3441562+02:00 0HNGRUG1CHN2J:0000000F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 98.6682ms (74253ad3)
2025-11-05T00:51:51.9201361+02:00  [INF] User profile is available. Using '"C:\Users\ThatoTs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-11-05T00:51:52.2323762+02:00  [INF] Now listening on: "https://localhost:7150" (d826f4b8)
2025-11-05T00:51:52.2347041+02:00  [INF] Now listening on: "http://localhost:5031" (d826f4b8)
2025-11-05T00:51:52.3307585+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-11-05T00:51:52.3337238+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-11-05T00:51:52.3360420+02:00  [INF] Content root path: "D:\HomeSpace\E_Prescribing_API\E_Prescribing_API" (cc26f24e)
2025-11-05T00:51:53.6805378+02:00 0HNGRUIVGES83:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - null null (d509f86a)
2025-11-05T00:51:53.8425818+02:00 0HNGRUIVGES83:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - 301 0 null 166.6386ms (74253ad3)
2025-11-05T00:51:53.8533032+02:00 0HNGRUIVGES83:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - null null (d509f86a)
2025-11-05T00:51:53.9583196+02:00 0HNGRUIVGES83:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 105.1202ms (74253ad3)
2025-11-05T00:51:53.9930478+02:00 0HNGRUIVGES83:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-11-05T00:51:53.9969185+02:00 0HNGRUIVGES83:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - null null (d509f86a)
2025-11-05T00:51:54.0070249+02:00 0HNGRUIVGES83:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - null null (d509f86a)
2025-11-05T00:51:54.0079383+02:00 0HNGRUIVGES83:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - 200 13770 "application/javascript; charset=utf-8" 15.2766ms (74253ad3)
2025-11-05T00:51:54.0243685+02:00 0HNGRUIVGES83:00000009 [INF] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T00:51:54.0244957+02:00 0HNGRUIVGES83:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 27.8896ms (74253ad3)
2025-11-05T00:51:54.0658184+02:00 0HNGRUIVGES83:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 59.1824ms (74253ad3)
2025-11-05T00:51:54.1672917+02:00 0HNGRUIVGES83:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-32x32.png""" - null null (d509f86a)
2025-11-05T00:51:54.1698100+02:00 0HNGRUIVGES83:0000000D [INF] Sending file. Request path: '"/favicon-32x32.png"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T00:51:54.1699991+02:00 0HNGRUIVGES83:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-32x32.png""" - 499 628 "image/png" 2.862ms (74253ad3)
2025-11-05T00:51:54.2114434+02:00 0HNGRUIVGES83:0000000F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-11-05T00:51:54.3680286+02:00 0HNGRUIVGES83:0000000F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 156.8897ms (74253ad3)
2025-11-05T00:56:41.7733327+02:00 0HNGRUIVGES84:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Admission/AdmitPatient""" - "application/json" 861 (d509f86a)
2025-11-05T00:56:41.7888823+02:00 0HNGRUIVGES84:00000003 [INF] Executing endpoint '"E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)"' (500cc934)
2025-11-05T00:56:41.8271843+02:00 0HNGRUIVGES84:00000003 [INF] Route matched with "{action = \"AdmitPatient\", controller = \"Admission\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AdmitPatient(E_Prescribing_API.CollectionModel.AdmissionCollection)" on controller "E_Prescribing_API.Controllers.AdmissionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T00:56:42.1712981+02:00 0HNGRUIVGES84:00000003 [WRN] Unknown step 0 in admission process (4e65c9b0)
2025-11-05T00:56:42.1780760+02:00 0HNGRUIVGES84:00000003 [INF] Executing "BadRequestObjectResult", writing value of type '"System.String"'. (605b4265)
2025-11-05T00:56:42.1848834+02:00 0HNGRUIVGES84:00000003 [INF] Executed action "E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)" in 352.2051ms (afa2e885)
2025-11-05T00:56:42.1850630+02:00 0HNGRUIVGES84:00000003 [INF] Executed endpoint '"E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)"' (99874f2b)
2025-11-05T00:56:42.1871661+02:00 0HNGRUIVGES84:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Admission/AdmitPatient""" - 400 null "text/plain; charset=utf-8" 414.0353ms (74253ad3)
2025-11-05T00:57:13.9504944+02:00 0HNGRUIVGES84:00000005 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Admission/AdmitPatient""" - "application/json" 861 (d509f86a)
2025-11-05T00:57:13.9520591+02:00 0HNGRUIVGES84:00000005 [INF] Executing endpoint '"E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)"' (500cc934)
2025-11-05T00:57:13.9522876+02:00 0HNGRUIVGES84:00000005 [INF] Route matched with "{action = \"AdmitPatient\", controller = \"Admission\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AdmitPatient(E_Prescribing_API.CollectionModel.AdmissionCollection)" on controller "E_Prescribing_API.Controllers.AdmissionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T00:57:15.9800047+02:00 0HNGRUIVGES84:00000005 [INF] Executed DbCommand ("100"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientMedications] ([MedicationId], [PatientId])
OUTPUT INSERTED.[PatientMedicationId]
VALUES (@p0, @p1);" (0723d8ff)
2025-11-05T00:57:16.0815007+02:00 0HNGRUIVGES84:00000005 [ERR] An exception occurred in the database while saving changes for context type '"E_Prescribing_API.Data.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_PatientMedications_Medications_MedicationId\". The conflict occurred in database \"E_Prescribing_API\", table \"dbo.Medications\", column 'MedicationId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ae53ee54-af8b-4c76-8d15-5b9c9da0d8c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientMedications_Medications_MedicationId". The conflict occurred in database "E_Prescribing_API", table "dbo.Medications", column 'MedicationId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ae53ee54-af8b-4c76-8d15-5b9c9da0d8c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
2025-11-05T00:57:16.1887891+02:00 0HNGRUIVGES84:00000005 [ERR] Error while admitting patient (a2588e81)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientMedications_Medications_MedicationId". The conflict occurred in database "E_Prescribing_API", table "dbo.Medications", column 'MedicationId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ae53ee54-af8b-4c76-8d15-5b9c9da0d8c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at E_Prescribing_API.Controllers.AdmissionController.AdmitPatient(AdmissionCollection model) in D:\HomeSpace\E_Prescribing_API\E_Prescribing_API\Controllers\AdmissionController.cs:line 76
2025-11-05T00:57:16.1923142+02:00 0HNGRUIVGES84:00000005 [INF] Executing "ObjectResult", writing value of type '"System.String"'. (605b4265)
2025-11-05T00:57:16.1935820+02:00 0HNGRUIVGES84:00000005 [INF] Executed action "E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)" in 2241.029ms (afa2e885)
2025-11-05T00:57:16.1940891+02:00 0HNGRUIVGES84:00000005 [INF] Executed endpoint '"E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)"' (99874f2b)
2025-11-05T00:57:16.2006312+02:00 0HNGRUIVGES84:00000005 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Admission/AdmitPatient""" - 500 null "text/plain; charset=utf-8" 2250.1964ms (74253ad3)
2025-11-05T00:58:21.1338264+02:00 0HNGRUIVGES84:00000007 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Admission/AdmitPatient""" - "application/json" 861 (d509f86a)
2025-11-05T00:58:21.1397582+02:00 0HNGRUIVGES84:00000007 [INF] Executing endpoint '"E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)"' (500cc934)
2025-11-05T00:58:21.1398867+02:00 0HNGRUIVGES84:00000007 [INF] Route matched with "{action = \"AdmitPatient\", controller = \"Admission\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AdmitPatient(E_Prescribing_API.CollectionModel.AdmissionCollection)" on controller "E_Prescribing_API.Controllers.AdmissionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T00:58:21.2404342+02:00 0HNGRUIVGES84:00000007 [INF] Executed DbCommand ("10"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientMedications] ([MedicationId], [PatientId])
OUTPUT INSERTED.[PatientMedicationId]
VALUES (@p0, @p1);" (0723d8ff)
2025-11-05T00:58:21.2579108+02:00 0HNGRUIVGES84:00000007 [ERR] An exception occurred in the database while saving changes for context type '"E_Prescribing_API.Data.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_PatientMedications_Medications_MedicationId\". The conflict occurred in database \"E_Prescribing_API\", table \"dbo.Medications\", column 'MedicationId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ae53ee54-af8b-4c76-8d15-5b9c9da0d8c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientMedications_Medications_MedicationId". The conflict occurred in database "E_Prescribing_API", table "dbo.Medications", column 'MedicationId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ae53ee54-af8b-4c76-8d15-5b9c9da0d8c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at E_Prescribing_API.Controllers.AdmissionController.AdmitPatient(AdmissionCollection model) in D:\HomeSpace\E_Prescribing_API\E_Prescribing_API\Controllers\AdmissionController.cs:line 76
2025-11-05T00:58:21.3226496+02:00 0HNGRUIVGES84:00000007 [ERR] Error while admitting patient (a2588e81)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientMedications_Medications_MedicationId". The conflict occurred in database "E_Prescribing_API", table "dbo.Medications", column 'MedicationId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ae53ee54-af8b-4c76-8d15-5b9c9da0d8c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at E_Prescribing_API.Controllers.AdmissionController.AdmitPatient(AdmissionCollection model) in D:\HomeSpace\E_Prescribing_API\E_Prescribing_API\Controllers\AdmissionController.cs:line 76
2025-11-05T00:58:21.3230246+02:00 0HNGRUIVGES84:00000007 [INF] Executing "ObjectResult", writing value of type '"System.String"'. (605b4265)
2025-11-05T00:58:21.3231432+02:00 0HNGRUIVGES84:00000007 [INF] Executed action "E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)" in 183.2159ms (afa2e885)
2025-11-05T00:58:21.3231721+02:00 0HNGRUIVGES84:00000007 [INF] Executed endpoint '"E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)"' (99874f2b)
2025-11-05T00:58:21.3234139+02:00 0HNGRUIVGES84:00000007 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Admission/AdmitPatient""" - 500 null "text/plain; charset=utf-8" 189.7282ms (74253ad3)
2025-11-05T01:00:02.8208090+02:00 0HNGRUIVGES84:00000009 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Admission/AdmitPatient""" - "application/json" 861 (d509f86a)
2025-11-05T01:00:02.8263404+02:00 0HNGRUIVGES84:00000009 [INF] Executing endpoint '"E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)"' (500cc934)
2025-11-05T01:00:02.8264677+02:00 0HNGRUIVGES84:00000009 [INF] Route matched with "{action = \"AdmitPatient\", controller = \"Admission\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AdmitPatient(E_Prescribing_API.CollectionModel.AdmissionCollection)" on controller "E_Prescribing_API.Controllers.AdmissionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T01:00:02.8550187+02:00 0HNGRUIVGES84:00000009 [INF] Executed DbCommand ("8"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientMedications] ([MedicationId], [PatientId])
OUTPUT INSERTED.[PatientMedicationId]
VALUES (@p0, @p1);" (0723d8ff)
2025-11-05T01:00:02.8746715+02:00 0HNGRUIVGES84:00000009 [ERR] An exception occurred in the database while saving changes for context type '"E_Prescribing_API.Data.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_PatientMedications_Medications_MedicationId\". The conflict occurred in database \"E_Prescribing_API\", table \"dbo.Medications\", column 'MedicationId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ae53ee54-af8b-4c76-8d15-5b9c9da0d8c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientMedications_Medications_MedicationId". The conflict occurred in database "E_Prescribing_API", table "dbo.Medications", column 'MedicationId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ae53ee54-af8b-4c76-8d15-5b9c9da0d8c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at E_Prescribing_API.Controllers.AdmissionController.AdmitPatient(AdmissionCollection model) in D:\HomeSpace\E_Prescribing_API\E_Prescribing_API\Controllers\AdmissionController.cs:line 76
2025-11-05T01:00:02.9691450+02:00 0HNGRUIVGES84:00000009 [ERR] Error while admitting patient (a2588e81)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientMedications_Medications_MedicationId". The conflict occurred in database "E_Prescribing_API", table "dbo.Medications", column 'MedicationId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ae53ee54-af8b-4c76-8d15-5b9c9da0d8c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at E_Prescribing_API.Controllers.AdmissionController.AdmitPatient(AdmissionCollection model) in D:\HomeSpace\E_Prescribing_API\E_Prescribing_API\Controllers\AdmissionController.cs:line 76
2025-11-05T01:00:02.9693497+02:00 0HNGRUIVGES84:00000009 [INF] Executing "ObjectResult", writing value of type '"System.String"'. (605b4265)
2025-11-05T01:00:02.9694791+02:00 0HNGRUIVGES84:00000009 [INF] Executed action "E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)" in 142.9769ms (afa2e885)
2025-11-05T01:00:02.9695158+02:00 0HNGRUIVGES84:00000009 [INF] Executed endpoint '"E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)"' (99874f2b)
2025-11-05T01:00:02.9698245+02:00 0HNGRUIVGES84:00000009 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Admission/AdmitPatient""" - 500 null "text/plain; charset=utf-8" 149.1773ms (74253ad3)
2025-11-05T01:05:04.2796764+02:00 0HNGRUIVGES85:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Admission/AdmitPatient""" - "application/json" 861 (d509f86a)
2025-11-05T01:05:04.2803568+02:00 0HNGRUIVGES85:00000003 [INF] Executing endpoint '"E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)"' (500cc934)
2025-11-05T01:05:04.2809086+02:00 0HNGRUIVGES85:00000003 [INF] Route matched with "{action = \"AdmitPatient\", controller = \"Admission\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AdmitPatient(E_Prescribing_API.CollectionModel.AdmissionCollection)" on controller "E_Prescribing_API.Controllers.AdmissionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T01:05:04.3358050+02:00 0HNGRUIVGES85:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientMedications] ([MedicationId], [PatientId])
OUTPUT INSERTED.[PatientMedicationId]
VALUES (@p0, @p1);" (0723d8ff)
2025-11-05T01:05:04.3701521+02:00 0HNGRUIVGES85:00000003 [ERR] An exception occurred in the database while saving changes for context type '"E_Prescribing_API.Data.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_PatientMedications_Medications_MedicationId\". The conflict occurred in database \"E_Prescribing_API\", table \"dbo.Medications\", column 'MedicationId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:08eb5cb3-f1ec-43e5-912e-3856719ea523
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientMedications_Medications_MedicationId". The conflict occurred in database "E_Prescribing_API", table "dbo.Medications", column 'MedicationId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:08eb5cb3-f1ec-43e5-912e-3856719ea523
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at E_Prescribing_API.Controllers.AdmissionController.AdmitPatient(AdmissionCollection model) in D:\HomeSpace\E_Prescribing_API\E_Prescribing_API\Controllers\AdmissionController.cs:line 76
2025-11-05T01:05:04.4510513+02:00 0HNGRUIVGES85:00000003 [ERR] Error while admitting patient (a2588e81)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientMedications_Medications_MedicationId". The conflict occurred in database "E_Prescribing_API", table "dbo.Medications", column 'MedicationId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:08eb5cb3-f1ec-43e5-912e-3856719ea523
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at E_Prescribing_API.Controllers.AdmissionController.AdmitPatient(AdmissionCollection model) in D:\HomeSpace\E_Prescribing_API\E_Prescribing_API\Controllers\AdmissionController.cs:line 76
2025-11-05T01:05:04.4513055+02:00 0HNGRUIVGES85:00000003 [INF] Executing "ObjectResult", writing value of type '"System.String"'. (605b4265)
2025-11-05T01:05:04.4514319+02:00 0HNGRUIVGES85:00000003 [INF] Executed action "E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)" in 170.4721ms (afa2e885)
2025-11-05T01:05:04.4514799+02:00 0HNGRUIVGES85:00000003 [INF] Executed endpoint '"E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)"' (99874f2b)
2025-11-05T01:05:04.4516850+02:00 0HNGRUIVGES85:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Admission/AdmitPatient""" - 500 null "text/plain; charset=utf-8" 172.9998ms (74253ad3)
2025-11-05T01:06:51.7180142+02:00 0HNGRUIVGES85:00000005 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Admission/AdmitPatient""" - "application/json" 861 (d509f86a)
2025-11-05T01:06:51.7182923+02:00 0HNGRUIVGES85:00000005 [INF] Executing endpoint '"E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)"' (500cc934)
2025-11-05T01:06:51.7183786+02:00 0HNGRUIVGES85:00000005 [INF] Route matched with "{action = \"AdmitPatient\", controller = \"Admission\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AdmitPatient(E_Prescribing_API.CollectionModel.AdmissionCollection)" on controller "E_Prescribing_API.Controllers.AdmissionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T01:06:51.7513192+02:00 0HNGRUIVGES85:00000005 [INF] Executed DbCommand ("28"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PatientMedications] ([MedicationId], [PatientId])
OUTPUT INSERTED.[PatientMedicationId]
VALUES (@p0, @p1);" (0723d8ff)
2025-11-05T01:06:51.7873560+02:00 0HNGRUIVGES85:00000005 [INF] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType8`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (605b4265)
2025-11-05T01:06:51.7946868+02:00 0HNGRUIVGES85:00000005 [INF] Executed action "E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)" in 76.2764ms (afa2e885)
2025-11-05T01:06:51.7947690+02:00 0HNGRUIVGES85:00000005 [INF] Executed endpoint '"E_Prescribing_API.Controllers.AdmissionController.AdmitPatient (E_Prescribing_API)"' (99874f2b)
2025-11-05T01:06:51.7949438+02:00 0HNGRUIVGES85:00000005 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Admission/AdmitPatient""" - 200 null "application/json; charset=utf-8" 77.0151ms (74253ad3)
2025-11-05T09:19:19.5415110+02:00  [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T09:19:19.5876826+02:00  [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T09:19:19.5901882+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T09:19:19.5909957+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T09:19:19.6213590+02:00  [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2025-11-05T09:19:19.6389540+02:00  [INF] Applying migration '"20251105071840_addprescrip"'. (0e2ac64d)
2025-11-05T09:19:19.7452910+02:00  [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Cities] DROP CONSTRAINT [FK_Cities_Provinces_ProvinceId];" (0723d8ff)
2025-11-05T09:19:19.7492124+02:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [ContraIndications] DROP CONSTRAINT [FK_ContraIndications_ActiveIngredients_ActiveIngredientId];" (0723d8ff)
2025-11-05T09:19:19.7514225+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [ContraIndications] DROP CONSTRAINT [FK_ContraIndications_ConditionDiagnosis_ConditionDiagnosisId];" (0723d8ff)
2025-11-05T09:19:19.7554554+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Facilities] DROP CONSTRAINT [FK_Facilities_FacilitiesTypes_FacilityTypeId];" (0723d8ff)
2025-11-05T09:19:19.7591772+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicalStaffs] DROP CONSTRAINT [FK_MedicalStaffs_AspNetUsers_UserId];" (0723d8ff)
2025-11-05T09:19:19.7605981+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicalStaffs] DROP CONSTRAINT [FK_MedicalStaffs_Facilities_FacilityId];" (0723d8ff)
2025-11-05T09:19:19.7627933+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicationIngredients] DROP CONSTRAINT [FK_MedicationIngredients_ActiveIngredients_ActiveIngredientId];" (0723d8ff)
2025-11-05T09:19:19.7645321+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicationIngredients] DROP CONSTRAINT [FK_MedicationIngredients_Medications_MedicationId];" (0723d8ff)
2025-11-05T09:19:19.9753311+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Medications] DROP CONSTRAINT [FK_Medications_DosageForms_DosageFormId];" (0723d8ff)
2025-11-05T09:19:19.9787505+02:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientCondition] DROP CONSTRAINT [FK_PatientCondition_ConditionDiagnosis_ConditionId];" (0723d8ff)
2025-11-05T09:19:19.9818036+02:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientCondition] DROP CONSTRAINT [FK_PatientCondition_Patients_PatientId];" (0723d8ff)
2025-11-05T09:19:19.9844428+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientMedications] DROP CONSTRAINT [FK_PatientMedications_Medications_MedicationId];" (0723d8ff)
2025-11-05T09:19:19.9863902+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientMedications] DROP CONSTRAINT [FK_PatientMedications_Patients_PatientId];" (0723d8ff)
2025-11-05T09:19:19.9880101+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Patients] DROP CONSTRAINT [FK_Patients_MedicalStaffs_MedicalSaffId];" (0723d8ff)
2025-11-05T09:19:19.9907718+02:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Patients] DROP CONSTRAINT [FK_Patients_Suburbs_SuburbId];" (0723d8ff)
2025-11-05T09:19:19.9927597+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Suburbs] DROP CONSTRAINT [FK_Suburbs_Cities_CityId];" (0723d8ff)
2025-11-05T09:19:20.0007522+02:00  [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_Suburbs_CityId] ON [Suburbs];" (0723d8ff)
2025-11-05T09:19:20.0047414+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_Patients_MedicalSaffId] ON [Patients];" (0723d8ff)
2025-11-05T09:19:21.1252941+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_Patients_SuburbId] ON [Patients];" (0723d8ff)
2025-11-05T09:19:21.1279857+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_PatientMedications_MedicationId] ON [PatientMedications];" (0723d8ff)
2025-11-05T09:19:21.1300260+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_PatientMedications_PatientId] ON [PatientMedications];" (0723d8ff)
2025-11-05T09:19:21.1323337+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_Medications_DosageFormId] ON [Medications];" (0723d8ff)
2025-11-05T09:19:21.1345947+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_MedicationIngredients_ActiveIngredientId] ON [MedicationIngredients];" (0723d8ff)
2025-11-05T09:19:21.1364644+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_MedicationIngredients_MedicationId] ON [MedicationIngredients];" (0723d8ff)
2025-11-05T09:19:21.1382384+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_MedicalStaffs_FacilityId] ON [MedicalStaffs];" (0723d8ff)
2025-11-05T09:19:21.1403696+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_MedicalStaffs_UserId] ON [MedicalStaffs];" (0723d8ff)
2025-11-05T09:19:21.1428781+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_Facilities_FacilityTypeId] ON [Facilities];" (0723d8ff)
2025-11-05T09:19:21.1450683+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_ContraIndications_ActiveIngredientId] ON [ContraIndications];" (0723d8ff)
2025-11-05T09:19:22.0357884+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_ContraIndications_ConditionDiagnosisId] ON [ContraIndications];" (0723d8ff)
2025-11-05T09:19:22.0387048+02:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_Cities_ProvinceId] ON [Cities];" (0723d8ff)
2025-11-05T09:19:22.0504911+02:00  [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientCondition] DROP CONSTRAINT [PK_PatientCondition];" (0723d8ff)
2025-11-05T09:19:22.0526128+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_PatientCondition_ConditionId] ON [PatientCondition];" (0723d8ff)
2025-11-05T09:19:22.4725030+02:00  [INF] Executed DbCommand ("420"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""EXEC sp_rename N'[PatientCondition]', N'PatientConditions';" (0723d8ff)
2025-11-05T09:19:22.4749520+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""EXEC sp_rename N'[PatientConditions].[IX_PatientCondition_PatientId]', N'IX_PatientConditions_PatientId', N'INDEX';" (0723d8ff)
2025-11-05T09:19:22.4792885+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientConditions] ADD CONSTRAINT [PK_PatientConditions] PRIMARY KEY ([PatientConditionId]);" (0723d8ff)
2025-11-05T09:19:22.4831744+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [PrescribedMedications] (
    [PrescribedMedicationId] int NOT NULL IDENTITY,
    [MedicationId] int NOT NULL,
    [PrescriptionId] int NOT NULL,
    [Quantity] int NOT NULL,
    [Instruction] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PrescribedMedications] PRIMARY KEY ([PrescribedMedicationId])
);" (0723d8ff)
2025-11-05T09:19:22.4866777+02:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [Prescriptions] (
    [PrescriptionId] int NOT NULL IDENTITY,
    [Date] datetime2 NOT NULL,
    [Status] nvarchar(max) NOT NULL,
    [isUrgent] bit NOT NULL,
    [Note] nvarchar(max) NOT NULL,
    [PatientId] int NOT NULL,
    [PrescriberId] int NOT NULL,
    [DispenserId] int NULL,
    CONSTRAINT [PK_Prescriptions] PRIMARY KEY ([PrescriptionId]),
    CONSTRAINT [FK_Prescriptions_MedicalStaffs_DispenserId] FOREIGN KEY ([DispenserId]) REFERENCES [MedicalStaffs] ([StaffId]),
    CONSTRAINT [FK_Prescriptions_MedicalStaffs_PrescriberId] FOREIGN KEY ([PrescriberId]) REFERENCES [MedicalStaffs] ([StaffId]) ON DELETE CASCADE,
    CONSTRAINT [FK_Prescriptions_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE CASCADE
);" (0723d8ff)
2025-11-05T09:19:23.0950743+02:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Prescriptions_DispenserId] ON [Prescriptions] ([DispenserId]);" (0723d8ff)
2025-11-05T09:19:23.1077051+02:00  [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Prescriptions_PatientId] ON [Prescriptions] ([PatientId]);" (0723d8ff)
2025-11-05T09:19:23.1128475+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Prescriptions_PrescriberId] ON [Prescriptions] ([PrescriberId]);" (0723d8ff)
2025-11-05T09:19:23.1157220+02:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientConditions] ADD CONSTRAINT [FK_PatientConditions_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T09:19:23.1178839+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251105071840_addprescrip', N'8.0.0');" (0723d8ff)
2025-11-05T11:21:41.9301994+02:00  [INF] User profile is available. Using '"C:\Users\ThatoTs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-11-05T11:21:42.2349384+02:00  [INF] Now listening on: "https://localhost:7150" (d826f4b8)
2025-11-05T11:21:42.2374581+02:00  [INF] Now listening on: "http://localhost:5031" (d826f4b8)
2025-11-05T11:21:42.3109674+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-11-05T11:21:42.3143528+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-11-05T11:21:42.3169162+02:00  [INF] Content root path: "D:\HomeSpace\E_Prescribing_API\E_Prescribing_API" (cc26f24e)
2025-11-05T11:21:44.1681638+02:00 0HNGS9ITP7IOB:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - null null (d509f86a)
2025-11-05T11:21:44.5234581+02:00 0HNGS9ITP7IOB:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - 301 0 null 365.1994ms (74253ad3)
2025-11-05T11:21:44.5678177+02:00 0HNGS9ITP7IOB:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - null null (d509f86a)
2025-11-05T11:21:44.7516780+02:00 0HNGS9ITP7IOB:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 184.1309ms (74253ad3)
2025-11-05T11:21:44.8811761+02:00 0HNGS9ITP7IOB:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-11-05T11:21:44.8840472+02:00 0HNGS9ITP7IOB:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - null null (d509f86a)
2025-11-05T11:21:44.8886921+02:00 0HNGS9ITP7IOB:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - null null (d509f86a)
2025-11-05T11:21:44.9128517+02:00 0HNGS9ITP7IOB:00000009 [INF] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T11:21:44.9130807+02:00 0HNGS9ITP7IOB:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 29.1169ms (74253ad3)
2025-11-05T11:21:45.0117116+02:00 0HNGS9ITP7IOB:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 123.2611ms (74253ad3)
2025-11-05T11:21:46.7527415+02:00 0HNGS9ITP7IOB:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - 200 13770 "application/javascript; charset=utf-8" 1872.4342ms (74253ad3)
2025-11-05T11:21:48.6042650+02:00 0HNGS9ITP7IOB:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-11-05T11:21:48.8153075+02:00 0HNGS9ITP7IOB:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 211.3782ms (74253ad3)
2025-11-05T11:27:12.5572757+02:00  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T11:27:12.5773791+02:00  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T11:27:12.5792116+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T11:27:12.5800061+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T11:27:12.5990987+02:00  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2025-11-05T11:27:12.6086232+02:00  [INF] Applying migration '"20251105092659_AllegiesTable"'. (0e2ac64d)
2025-11-05T11:27:13.0803209+02:00  [INF] Executed DbCommand ("431"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""EXEC sp_rename N'[Prescriptions].[isUrgent]', N'IsUrgent', N'COLUMN';" (0723d8ff)
2025-11-05T11:27:13.1135655+02:00  [ERR] Failed executing DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [MedicationInteractions] (
    [InteractionId] int NOT NULL IDENTITY,
    [ActiveIngredient1Id] int NOT NULL,
    [ActiveIngredient2Id] int NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_MedicationInteractions] PRIMARY KEY ([InteractionId]),
    CONSTRAINT [FK_MedicationInteractions_ActiveIngredients_ActiveIngredient1Id] FOREIGN KEY ([ActiveIngredient1Id]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE CASCADE,
    CONSTRAINT [FK_MedicationInteractions_ActiveIngredients_ActiveIngredient2Id] FOREIGN KEY ([ActiveIngredient2Id]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE CASCADE
);" (627a98df)
2025-11-05T11:28:52.9158196+02:00  [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T11:28:52.9387378+02:00  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T11:28:52.9423563+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T11:28:52.9433294+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T11:28:52.9584574+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2025-11-05T11:28:52.9741660+02:00  [INF] Applying migration '"20251105092659_AllegiesTable"'. (0e2ac64d)
2025-11-05T11:28:53.3970411+02:00  [INF] Executed DbCommand ("364"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""EXEC sp_rename N'[Prescriptions].[isUrgent]', N'IsUrgent', N'COLUMN';" (0723d8ff)
2025-11-05T11:28:53.4128663+02:00  [ERR] Failed executing DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [MedicationInteractions] (
    [InteractionId] int NOT NULL IDENTITY,
    [ActiveIngredient1Id] int NOT NULL,
    [ActiveIngredient2Id] int NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_MedicationInteractions] PRIMARY KEY ([InteractionId]),
    CONSTRAINT [FK_MedicationInteractions_ActiveIngredients_ActiveIngredient1Id] FOREIGN KEY ([ActiveIngredient1Id]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE CASCADE,
    CONSTRAINT [FK_MedicationInteractions_ActiveIngredients_ActiveIngredient2Id] FOREIGN KEY ([ActiveIngredient2Id]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE CASCADE
);" (627a98df)
2025-11-05T11:29:18.3546584+02:00  [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T11:29:18.3787949+02:00  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T11:29:18.3922016+02:00  [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2025-11-05T11:29:46.5319582+02:00  [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T11:29:46.5615694+02:00  [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T11:29:46.5647107+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T11:29:46.5670935+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T11:29:46.5837353+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2025-11-05T11:29:46.5991996+02:00  [INF] Applying migration '"20251105092933_addInd"'. (0e2ac64d)
2025-11-05T11:29:47.3043409+02:00  [INF] Executed DbCommand ("642"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""EXEC sp_rename N'[Prescriptions].[isUrgent]', N'IsUrgent', N'COLUMN';" (0723d8ff)
2025-11-05T11:29:47.3183892+02:00  [ERR] Failed executing DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [MedicationInteractions] (
    [InteractionId] int NOT NULL IDENTITY,
    [ActiveIngredient1Id] int NOT NULL,
    [ActiveIngredient2Id] int NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_MedicationInteractions] PRIMARY KEY ([InteractionId]),
    CONSTRAINT [FK_MedicationInteractions_ActiveIngredients_ActiveIngredient1Id] FOREIGN KEY ([ActiveIngredient1Id]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE CASCADE,
    CONSTRAINT [FK_MedicationInteractions_ActiveIngredients_ActiveIngredient2Id] FOREIGN KEY ([ActiveIngredient2Id]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE CASCADE
);" (627a98df)
2025-11-05T11:33:55.3325913+02:00  [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T11:33:55.3574286+02:00  [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T11:33:55.3598055+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T11:33:55.3611355+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T11:33:55.3776705+02:00  [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2025-11-05T11:33:55.3888864+02:00  [INF] Applying migration '"20251105092933_addInd"'. (0e2ac64d)
2025-11-05T11:33:55.8877749+02:00  [INF] Executed DbCommand ("458"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""EXEC sp_rename N'[Prescriptions].[isUrgent]', N'IsUrgent', N'COLUMN';" (0723d8ff)
2025-11-05T11:33:55.8947639+02:00  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [MedicationInteractions] (
    [InteractionId] int NOT NULL IDENTITY,
    [ActiveIngredient1Id] int NOT NULL,
    [ActiveIngredient2Id] int NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_MedicationInteractions] PRIMARY KEY ([InteractionId]),
    CONSTRAINT [FK_MedicationInteractions_ActiveIngredients_ActiveIngredient1Id] FOREIGN KEY ([ActiveIngredient1Id]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE CASCADE,
    CONSTRAINT [FK_MedicationInteractions_ActiveIngredients_ActiveIngredient2Id] FOREIGN KEY ([ActiveIngredient2Id]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE NO ACTION
);" (0723d8ff)
2025-11-05T11:33:55.9060615+02:00  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE [PatientAllergies] (
    [AllergyId] int NOT NULL IDENTITY,
    [PatientId] int NOT NULL,
    [ActiveIngredientId] int NOT NULL,
    CONSTRAINT [PK_PatientAllergies] PRIMARY KEY ([AllergyId]),
    CONSTRAINT [FK_PatientAllergies_ActiveIngredients_ActiveIngredientId] FOREIGN KEY ([ActiveIngredientId]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE CASCADE,
    CONSTRAINT [FK_PatientAllergies_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE CASCADE
);" (0723d8ff)
2025-11-05T11:33:55.9115577+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_MedicationInteractions_ActiveIngredient1Id] ON [MedicationInteractions] ([ActiveIngredient1Id]);" (0723d8ff)
2025-11-05T11:33:55.9152553+02:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_MedicationInteractions_ActiveIngredient2Id] ON [MedicationInteractions] ([ActiveIngredient2Id]);" (0723d8ff)
2025-11-05T11:33:55.9857257+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PatientAllergies_ActiveIngredientId] ON [PatientAllergies] ([ActiveIngredientId]);" (0723d8ff)
2025-11-05T11:33:55.9879849+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PatientAllergies_PatientId] ON [PatientAllergies] ([PatientId]);" (0723d8ff)
2025-11-05T11:33:55.9906049+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251105092933_addInd', N'8.0.0');" (0723d8ff)
2025-11-05T11:34:14.0903511+02:00  [INF] User profile is available. Using '"C:\Users\ThatoTs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-11-05T11:34:14.3297538+02:00  [INF] Now listening on: "https://localhost:7150" (d826f4b8)
2025-11-05T11:34:14.3315691+02:00  [INF] Now listening on: "http://localhost:5031" (d826f4b8)
2025-11-05T11:34:14.3713093+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-11-05T11:34:14.3744653+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-11-05T11:34:14.3762823+02:00  [INF] Content root path: "D:\HomeSpace\E_Prescribing_API\E_Prescribing_API" (cc26f24e)
2025-11-05T11:34:15.6056588+02:00 0HNGS9PTUQU18:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - null null (d509f86a)
2025-11-05T11:34:15.8088786+02:00 0HNGS9PTUQU18:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - 301 0 null 210.2277ms (74253ad3)
2025-11-05T11:34:15.8427545+02:00 0HNGS9PTUQU18:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - null null (d509f86a)
2025-11-05T11:34:15.9462189+02:00 0HNGS9PTUQU18:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 103.7069ms (74253ad3)
2025-11-05T11:34:16.0660511+02:00 0HNGS9PTUQU18:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-11-05T11:34:16.0705230+02:00 0HNGS9PTUQU18:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - null null (d509f86a)
2025-11-05T11:34:16.0719688+02:00 0HNGS9PTUQU18:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - null null (d509f86a)
2025-11-05T11:34:16.0730642+02:00 0HNGS9PTUQU18:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - 200 13770 "application/javascript; charset=utf-8" 7.514ms (74253ad3)
2025-11-05T11:34:16.0911857+02:00 0HNGS9PTUQU18:00000009 [INF] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T11:34:16.0914256+02:00 0HNGS9PTUQU18:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 20.9924ms (74253ad3)
2025-11-05T11:34:16.1359084+02:00 0HNGS9PTUQU18:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 64.1917ms (74253ad3)
2025-11-05T11:34:16.2382158+02:00 0HNGS9PTUQU18:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-16x16.png""" - null null (d509f86a)
2025-11-05T11:34:16.2411244+02:00 0HNGS9PTUQU18:0000000D [INF] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T11:34:16.2413526+02:00 0HNGS9PTUQU18:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-16x16.png""" - 499 665 "image/png" 3.4372ms (74253ad3)
2025-11-05T11:34:16.3507783+02:00 0HNGS9PTUQU18:0000000F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-11-05T11:34:16.6491566+02:00 0HNGS9PTUQU18:0000000F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 298.4557ms (74253ad3)
2025-11-05T11:38:20.7841587+02:00 0HNGS9PTUQU19:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1495 (d509f86a)
2025-11-05T11:38:20.7905922+02:00 0HNGS9PTUQU19:00000003 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T11:38:20.8182874+02:00 0HNGS9PTUQU19:00000003 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T11:38:21.1057940+02:00 0HNGS9PTUQU19:00000003 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 282.8047ms (afa2e885)
2025-11-05T11:38:21.1070692+02:00 0HNGS9PTUQU19:00000003 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T11:38:21.1618864+02:00 0HNGS9PTUQU19:00000003 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.InvalidOperationException: Unable to resolve service for type 'E_Prescribing_API.Data.Services.Alerts' while attempting to activate 'E_Prescribing_API.Controllers.PrescriptionController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-11-05T11:38:21.1688527+02:00 0HNGS9PTUQU19:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 500 null "text/plain; charset=utf-8" 384.7495ms (74253ad3)
2025-11-05T11:39:38.2251756+02:00  [INF] User profile is available. Using '"C:\Users\ThatoTs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-11-05T11:39:38.4976017+02:00  [INF] Now listening on: "https://localhost:7150" (d826f4b8)
2025-11-05T11:39:38.4998999+02:00  [INF] Now listening on: "http://localhost:5031" (d826f4b8)
2025-11-05T11:39:38.5973122+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-11-05T11:39:38.5996172+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-11-05T11:39:38.6017123+02:00  [INF] Content root path: "D:\HomeSpace\E_Prescribing_API\E_Prescribing_API" (cc26f24e)
2025-11-05T11:39:40.4635922+02:00 0HNGS9SUJ71GA:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - null null (d509f86a)
2025-11-05T11:39:40.7373908+02:00 0HNGS9SUJ71GA:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - 301 0 null 287.5081ms (74253ad3)
2025-11-05T11:39:40.7808891+02:00 0HNGS9SUJ71GA:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - null null (d509f86a)
2025-11-05T11:39:40.9406660+02:00 0HNGS9SUJ71GA:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 159.9336ms (74253ad3)
2025-11-05T11:39:41.3893887+02:00 0HNGS9SUJ71GA:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-11-05T11:39:41.3937274+02:00 0HNGS9SUJ71GA:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - null null (d509f86a)
2025-11-05T11:39:41.3998935+02:00 0HNGS9SUJ71GA:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - null null (d509f86a)
2025-11-05T11:39:41.4010841+02:00 0HNGS9SUJ71GA:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - 200 13770 "application/javascript; charset=utf-8" 11.7676ms (74253ad3)
2025-11-05T11:39:41.4257701+02:00 0HNGS9SUJ71GA:00000009 [INF] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T11:39:41.4260507+02:00 0HNGS9SUJ71GA:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 32.3987ms (74253ad3)
2025-11-05T11:39:42.8395388+02:00 0HNGS9SUJ71GA:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 1439.6792ms (74253ad3)
2025-11-05T11:39:42.8821160+02:00 0HNGS9SUJ71GA:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-16x16.png""" - null null (d509f86a)
2025-11-05T11:39:42.8874025+02:00 0HNGS9SUJ71GA:0000000D [INF] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T11:39:42.8876176+02:00 0HNGS9SUJ71GA:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-16x16.png""" - 499 665 "image/png" 6.5082ms (74253ad3)
2025-11-05T11:39:43.2875059+02:00 0HNGS9SUJ71GA:0000000F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-11-05T11:39:43.5101581+02:00 0HNGS9SUJ71GA:0000000F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 223.6261ms (74253ad3)
2025-11-05T11:40:07.5155203+02:00 0HNGS9SUJ71GA:00000011 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1495 (d509f86a)
2025-11-05T11:40:07.5201011+02:00 0HNGS9SUJ71GA:00000011 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T11:40:07.5496259+02:00 0HNGS9SUJ71GA:00000011 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T11:40:09.6573717+02:00 0HNGS9SUJ71GA:00000011 [INF] Executed DbCommand ("64"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[StaffId], [m].[ContactNumber], [m].[FacilityId], [m].[FullName], [m].[Name], [m].[RegistrationNumber], [m].[Surname], [m].[UserId]
FROM [MedicalStaffs] AS [m]
WHERE 0 = 1" (0723d8ff)
2025-11-05T11:40:09.6865299+02:00 0HNGS9SUJ71GA:00000011 [INF] Executing "UnauthorizedObjectResult", writing value of type '"System.String"'. (605b4265)
2025-11-05T11:40:09.6913602+02:00 0HNGS9SUJ71GA:00000011 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 2138.3503ms (afa2e885)
2025-11-05T11:40:09.6917895+02:00 0HNGS9SUJ71GA:00000011 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T11:40:09.6982440+02:00 0HNGS9SUJ71GA:00000011 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 401 null "text/plain; charset=utf-8" 2183.2367ms (74253ad3)
2025-11-05T11:42:44.2439408+02:00 0HNGS9SUJ71GA:00000013 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1495 (d509f86a)
2025-11-05T11:42:44.2492603+02:00 0HNGS9SUJ71GA:00000013 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T11:42:44.2498721+02:00 0HNGS9SUJ71GA:00000013 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T11:42:44.2875997+02:00 0HNGS9SUJ71GA:00000013 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[StaffId], [m].[ContactNumber], [m].[FacilityId], [m].[FullName], [m].[Name], [m].[RegistrationNumber], [m].[Surname], [m].[UserId]
FROM [MedicalStaffs] AS [m]
WHERE 0 = 1" (0723d8ff)
2025-11-05T11:42:44.2886482+02:00 0HNGS9SUJ71GA:00000013 [INF] Executing "UnauthorizedObjectResult", writing value of type '"System.String"'. (605b4265)
2025-11-05T11:42:44.2888295+02:00 0HNGS9SUJ71GA:00000013 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 38.8486ms (afa2e885)
2025-11-05T11:42:44.2888839+02:00 0HNGS9SUJ71GA:00000013 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T11:42:44.2891112+02:00 0HNGS9SUJ71GA:00000013 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 401 null "text/plain; charset=utf-8" 45.2811ms (74253ad3)
2025-11-05T11:45:40.8866665+02:00 0HNGS9SUJ71GB:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1496 (d509f86a)
2025-11-05T11:45:40.8880009+02:00 0HNGS9SUJ71GB:00000003 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T11:45:40.8881603+02:00 0HNGS9SUJ71GB:00000003 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T11:45:40.9686175+02:00 0HNGS9SUJ71GB:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[StaffId], [m].[ContactNumber], [m].[FacilityId], [m].[FullName], [m].[Name], [m].[RegistrationNumber], [m].[Surname], [m].[UserId]
FROM [MedicalStaffs] AS [m]
WHERE 0 = 1" (0723d8ff)
2025-11-05T11:45:40.9692100+02:00 0HNGS9SUJ71GB:00000003 [INF] Executing "UnauthorizedObjectResult", writing value of type '"System.String"'. (605b4265)
2025-11-05T11:45:40.9693946+02:00 0HNGS9SUJ71GB:00000003 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 81.1635ms (afa2e885)
2025-11-05T11:45:40.9694878+02:00 0HNGS9SUJ71GB:00000003 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T11:45:40.9699156+02:00 0HNGS9SUJ71GB:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 401 null "text/plain; charset=utf-8" 83.865ms (74253ad3)
2025-11-05T11:46:48.3264673+02:00 0HNGS9SUJ71GB:00000005 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1497 (d509f86a)
2025-11-05T11:46:48.3268637+02:00 0HNGS9SUJ71GB:00000005 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T11:46:48.3269646+02:00 0HNGS9SUJ71GB:00000005 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T11:46:48.3340059+02:00 0HNGS9SUJ71GB:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[StaffId], [m].[ContactNumber], [m].[FacilityId], [m].[FullName], [m].[Name], [m].[RegistrationNumber], [m].[Surname], [m].[UserId]
FROM [MedicalStaffs] AS [m]
WHERE 0 = 1" (0723d8ff)
2025-11-05T11:46:48.3345686+02:00 0HNGS9SUJ71GB:00000005 [INF] Executing "UnauthorizedObjectResult", writing value of type '"System.String"'. (605b4265)
2025-11-05T11:46:48.3347448+02:00 0HNGS9SUJ71GB:00000005 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 7.734ms (afa2e885)
2025-11-05T11:46:48.3348172+02:00 0HNGS9SUJ71GB:00000005 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T11:46:48.3349927+02:00 0HNGS9SUJ71GB:00000005 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 401 null "text/plain; charset=utf-8" 9.0928ms (74253ad3)
2025-11-05T11:48:00.6517513+02:00 0HNGS9SUJ71GB:00000007 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 255 (d509f86a)
2025-11-05T11:48:00.6520661+02:00 0HNGS9SUJ71GB:00000007 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T11:48:00.6523056+02:00 0HNGS9SUJ71GB:00000007 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T11:48:00.6566507+02:00 0HNGS9SUJ71GB:00000007 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T11:48:00.6833699+02:00 0HNGS9SUJ71GB:00000007 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 30.9873ms (afa2e885)
2025-11-05T11:48:00.6834330+02:00 0HNGS9SUJ71GB:00000007 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T11:48:00.6837037+02:00 0HNGS9SUJ71GB:00000007 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 31.8726ms (74253ad3)
2025-11-05T11:51:03.0342185+02:00 0HNGS9SUJ71GC:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1492 (d509f86a)
2025-11-05T11:51:03.0347039+02:00 0HNGS9SUJ71GC:00000003 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T11:51:03.0348247+02:00 0HNGS9SUJ71GC:00000003 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T11:51:03.0464891+02:00 0HNGS9SUJ71GC:00000003 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T11:51:03.0469111+02:00 0HNGS9SUJ71GC:00000003 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 12.0526ms (afa2e885)
2025-11-05T11:51:03.0469587+02:00 0HNGS9SUJ71GC:00000003 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T11:51:03.0470569+02:00 0HNGS9SUJ71GC:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 13.7634ms (74253ad3)
2025-11-05T11:52:42.5809478+02:00 0HNGS9SUJ71GC:00000005 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1509 (d509f86a)
2025-11-05T11:52:42.5812718+02:00 0HNGS9SUJ71GC:00000005 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T11:52:42.5817353+02:00 0HNGS9SUJ71GC:00000005 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T11:52:42.5908760+02:00 0HNGS9SUJ71GC:00000005 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T11:52:42.5910880+02:00 0HNGS9SUJ71GC:00000005 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 9.3264ms (afa2e885)
2025-11-05T11:52:42.5911166+02:00 0HNGS9SUJ71GC:00000005 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T11:52:42.5911813+02:00 0HNGS9SUJ71GC:00000005 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 10.3287ms (74253ad3)
2025-11-05T11:53:03.9775401+02:00 0HNGS9SUJ71GC:00000007 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1495 (d509f86a)
2025-11-05T11:53:03.9780046+02:00 0HNGS9SUJ71GC:00000007 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T11:53:03.9781081+02:00 0HNGS9SUJ71GC:00000007 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T11:53:03.9806866+02:00 0HNGS9SUJ71GC:00000007 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T11:53:03.9809423+02:00 0HNGS9SUJ71GC:00000007 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 2.7854ms (afa2e885)
2025-11-05T11:53:03.9809801+02:00 0HNGS9SUJ71GC:00000007 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T11:53:03.9810707+02:00 0HNGS9SUJ71GC:00000007 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 3.9246ms (74253ad3)
2025-11-05T11:53:30.1118974+02:00 0HNGS9SUJ71GC:00000009 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1497 (d509f86a)
2025-11-05T11:53:30.1121627+02:00 0HNGS9SUJ71GC:00000009 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T11:53:30.1122493+02:00 0HNGS9SUJ71GC:00000009 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T11:53:30.1354636+02:00 0HNGS9SUJ71GC:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[StaffId], [m].[ContactNumber], [m].[FacilityId], [m].[FullName], [m].[Name], [m].[RegistrationNumber], [m].[Surname], [m].[UserId]
FROM [MedicalStaffs] AS [m]
WHERE 0 = 1" (0723d8ff)
2025-11-05T11:53:30.1357535+02:00 0HNGS9SUJ71GC:00000009 [INF] Executing "UnauthorizedObjectResult", writing value of type '"System.String"'. (605b4265)
2025-11-05T11:53:30.1358421+02:00 0HNGS9SUJ71GC:00000009 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 23.5587ms (afa2e885)
2025-11-05T11:53:30.1358607+02:00 0HNGS9SUJ71GC:00000009 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T11:53:30.1359757+02:00 0HNGS9SUJ71GC:00000009 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 401 null "text/plain; charset=utf-8" 24.4484ms (74253ad3)
2025-11-05T11:56:05.4892489+02:00  [INF] User profile is available. Using '"C:\Users\ThatoTs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-11-05T11:56:05.7389633+02:00  [INF] Now listening on: "https://localhost:7150" (d826f4b8)
2025-11-05T11:56:05.7409117+02:00  [INF] Now listening on: "http://localhost:5031" (d826f4b8)
2025-11-05T11:56:05.7869522+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-11-05T11:56:05.7891518+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-11-05T11:56:05.7909799+02:00  [INF] Content root path: "D:\HomeSpace\E_Prescribing_API\E_Prescribing_API" (cc26f24e)
2025-11-05T11:56:06.7953997+02:00 0HNGSA64NS4UB:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - null null (d509f86a)
2025-11-05T11:56:07.0056369+02:00 0HNGSA64NS4UB:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - 301 0 null 216.9641ms (74253ad3)
2025-11-05T11:56:07.0450317+02:00 0HNGSA64NS4UB:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - null null (d509f86a)
2025-11-05T11:56:07.1293533+02:00 0HNGSA64NS4UB:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 84.4531ms (74253ad3)
2025-11-05T11:56:07.1789621+02:00 0HNGSA64NS4UB:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-11-05T11:56:07.1839685+02:00 0HNGSA64NS4UB:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - 200 13770 "application/javascript; charset=utf-8" 5.28ms (74253ad3)
2025-11-05T11:56:07.1877323+02:00 0HNGSA64NS4UB:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - null null (d509f86a)
2025-11-05T11:56:07.1917215+02:00 0HNGSA64NS4UB:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - null null (d509f86a)
2025-11-05T11:56:07.2058851+02:00 0HNGSA64NS4UB:00000009 [INF] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T11:56:07.2060484+02:00 0HNGSA64NS4UB:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 18.3555ms (74253ad3)
2025-11-05T11:56:07.2376513+02:00 0HNGSA64NS4UB:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 46.1285ms (74253ad3)
2025-11-05T11:56:07.3466889+02:00 0HNGSA64NS4UB:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-11-05T11:56:07.4433100+02:00 0HNGSA64NS4UB:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 96.6501ms (74253ad3)
2025-11-05T11:56:18.4067650+02:00 0HNGSA64NS4UB:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1497 (d509f86a)
2025-11-05T11:56:18.4115745+02:00 0HNGSA64NS4UB:0000000F [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T11:56:18.4362686+02:00 0HNGSA64NS4UB:0000000F [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T11:56:19.9827960+02:00 0HNGSA64NS4UB:0000000F [INF] Executed DbCommand ("46"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[StaffId], [m].[ContactNumber], [m].[FacilityId], [m].[FullName], [m].[Name], [m].[RegistrationNumber], [m].[Surname], [m].[UserId]
FROM [MedicalStaffs] AS [m]
WHERE [m].[UserId] = 10" (0723d8ff)
2025-11-05T11:56:20.2880594+02:00 0HNGSA64NS4UB:0000000F [INF] Executed DbCommand ("107"ms) [Parameters=["@__8__locals1_patientId_0='?' (DbType = Int32), @__medicationIdsList_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[IngredientName], [t].[MedicationName]
FROM (
    SELECT DISTINCT [a].[Name] AS [IngredientName], [m0].[Name] AS [MedicationName]
    FROM [PatientAllergies] AS [p]
    INNER JOIN [MedicationIngredients] AS [m] ON [p].[ActiveIngredientId] = [m].[ActiveIngredientId]
    INNER JOIN [ActiveIngredients] AS [a] ON [m].[ActiveIngredientId] = [a].[IngredientId]
    INNER JOIN [Medications] AS [m0] ON [m].[MedicationId] = [m0].[MedicationId]
    WHERE [p].[PatientId] = @__8__locals1_patientId_0 AND [m].[MedicationId] IN (
        SELECT [m1].[value]
        FROM OPENJSON(@__medicationIdsList_1) WITH ([value] int '$') AS [m1]
    )
) AS [t]" (0723d8ff)
2025-11-05T11:56:20.3385806+02:00 0HNGSA64NS4UB:0000000F [INF] Executed DbCommand ("31"ms) [Parameters=["@__patientId_0='?' (DbType = Int32), @__medicationIdsList_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Name]
FROM (
    SELECT DISTINCT [a].[Name]
    FROM [ContraIndications] AS [c]
    INNER JOIN [ActiveIngredients] AS [a] ON [c].[ActiveIngredientId] = [a].[IngredientId]
    INNER JOIN [MedicationIngredients] AS [m] ON [a].[IngredientId] = [m].[ActiveIngredientId]
    INNER JOIN [PatientConditions] AS [p] ON @__patientId_0 = [p].[PatientId] AND [c].[ConditionDiagnosisId] = [p].[ConditionId]
    WHERE [m].[MedicationId] IN (
        SELECT [m0].[value]
        FROM OPENJSON(@__medicationIdsList_1) WITH ([value] int '$') AS [m0]
    )
) AS [t]" (0723d8ff)
2025-11-05T11:56:20.3967432+02:00 0HNGSA64NS4UB:0000000F [INF] Executed DbCommand ("37"ms) [Parameters=["@__newMedicationIdsList_1='?' (Size = 4000), @__8__locals1_patientId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT DISTINCT [m1].[Description]
FROM [PatientMedications] AS [p]
INNER JOIN [MedicationIngredients] AS [m] ON [p].[MedicationId] = [m].[MedicationId]
INNER JOIN (
    SELECT [m0].[ActiveIngredientId]
    FROM [MedicationIngredients] AS [m0]
    WHERE [m0].[MedicationId] IN (
        SELECT [n].[value]
        FROM OPENJSON(@__newMedicationIdsList_1) WITH ([value] int '$') AS [n]
    )
) AS [t] ON [m].[ActiveIngredientId] <> [t].[ActiveIngredientId]
CROSS JOIN [MedicationInteractions] AS [m1]
WHERE [p].[PatientId] = @__8__locals1_patientId_0 AND (([m1].[ActiveIngredient1Id] = [m].[ActiveIngredientId] AND [m1].[ActiveIngredient2Id] = [t].[ActiveIngredientId]) OR ([m1].[ActiveIngredient1Id] = [t].[ActiveIngredientId] AND [m1].[ActiveIngredient2Id] = [m].[ActiveIngredientId]))" (0723d8ff)
2025-11-05T11:56:20.5399986+02:00 0HNGSA64NS4UB:0000000F [INF] Executed DbCommand ("10"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prescriptions] ([Date], [DispenserId], [IsUrgent], [Note], [PatientId], [PrescriberId], [Status])
OUTPUT INSERTED.[PrescriptionId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2025-11-05T11:56:20.5977478+02:00 0HNGSA64NS4UB:0000000F [ERR] An exception occurred in the database while saving changes for context type '"E_Prescribing_API.Data.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_Prescriptions_Patients_PatientId\". The conflict occurred in database \"E_Prescribing_API\", table \"dbo.Patients\", column 'PatientId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e54a5ab2-89ad-4bb1-b2cb-25be2ec3d24a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Prescriptions_Patients_PatientId". The conflict occurred in database "E_Prescribing_API", table "dbo.Patients", column 'PatientId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e54a5ab2-89ad-4bb1-b2cb-25be2ec3d24a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication(PrescriptionCollection model) in D:\HomeSpace\E_Prescribing_API\E_Prescribing_API\Controllers\PrescriptionController.cs:line 73
2025-11-05T11:56:20.7075746+02:00 0HNGSA64NS4UB:0000000F [ERR] Error while prescribing medication (7f31f151)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Prescriptions_Patients_PatientId". The conflict occurred in database "E_Prescribing_API", table "dbo.Patients", column 'PatientId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e54a5ab2-89ad-4bb1-b2cb-25be2ec3d24a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication(PrescriptionCollection model) in D:\HomeSpace\E_Prescribing_API\E_Prescribing_API\Controllers\PrescriptionController.cs:line 73
2025-11-05T11:56:20.7115223+02:00 0HNGSA64NS4UB:0000000F [INF] Executing "ObjectResult", writing value of type '"System.String"'. (605b4265)
2025-11-05T11:56:20.7147873+02:00 0HNGSA64NS4UB:0000000F [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 2275.7432ms (afa2e885)
2025-11-05T11:56:20.7151793+02:00 0HNGSA64NS4UB:0000000F [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T11:56:20.7231076+02:00 0HNGSA64NS4UB:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 500 null "text/plain; charset=utf-8" 2316.8266ms (74253ad3)
2025-11-05T12:00:54.3332103+02:00 0HNGSA64NS4UC:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1497 (d509f86a)
2025-11-05T12:00:54.3353534+02:00 0HNGSA64NS4UC:00000003 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T12:00:54.3357079+02:00 0HNGSA64NS4UC:00000003 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T12:00:54.3675266+02:00 0HNGSA64NS4UC:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[StaffId], [m].[ContactNumber], [m].[FacilityId], [m].[FullName], [m].[Name], [m].[RegistrationNumber], [m].[Surname], [m].[UserId]
FROM [MedicalStaffs] AS [m]
WHERE [m].[UserId] = 10" (0723d8ff)
2025-11-05T12:00:54.4281502+02:00 0HNGSA64NS4UC:00000003 [INF] Executed DbCommand ("55"ms) [Parameters=["@__8__locals1_patientId_0='?' (DbType = Int32), @__medicationIdsList_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[IngredientName], [t].[MedicationName]
FROM (
    SELECT DISTINCT [a].[Name] AS [IngredientName], [m0].[Name] AS [MedicationName]
    FROM [PatientAllergies] AS [p]
    INNER JOIN [MedicationIngredients] AS [m] ON [p].[ActiveIngredientId] = [m].[ActiveIngredientId]
    INNER JOIN [ActiveIngredients] AS [a] ON [m].[ActiveIngredientId] = [a].[IngredientId]
    INNER JOIN [Medications] AS [m0] ON [m].[MedicationId] = [m0].[MedicationId]
    WHERE [p].[PatientId] = @__8__locals1_patientId_0 AND [m].[MedicationId] IN (
        SELECT [m1].[value]
        FROM OPENJSON(@__medicationIdsList_1) WITH ([value] int '$') AS [m1]
    )
) AS [t]" (0723d8ff)
2025-11-05T12:00:54.4602814+02:00 0HNGSA64NS4UC:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=["@__patientId_0='?' (DbType = Int32), @__medicationIdsList_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Name]
FROM (
    SELECT DISTINCT [a].[Name]
    FROM [ContraIndications] AS [c]
    INNER JOIN [ActiveIngredients] AS [a] ON [c].[ActiveIngredientId] = [a].[IngredientId]
    INNER JOIN [MedicationIngredients] AS [m] ON [a].[IngredientId] = [m].[ActiveIngredientId]
    INNER JOIN [PatientConditions] AS [p] ON @__patientId_0 = [p].[PatientId] AND [c].[ConditionDiagnosisId] = [p].[ConditionId]
    WHERE [m].[MedicationId] IN (
        SELECT [m0].[value]
        FROM OPENJSON(@__medicationIdsList_1) WITH ([value] int '$') AS [m0]
    )
) AS [t]" (0723d8ff)
2025-11-05T12:00:54.5087547+02:00 0HNGSA64NS4UC:00000003 [INF] Executed DbCommand ("43"ms) [Parameters=["@__newMedicationIdsList_1='?' (Size = 4000), @__8__locals1_patientId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT DISTINCT [m1].[Description]
FROM [PatientMedications] AS [p]
INNER JOIN [MedicationIngredients] AS [m] ON [p].[MedicationId] = [m].[MedicationId]
INNER JOIN (
    SELECT [m0].[ActiveIngredientId]
    FROM [MedicationIngredients] AS [m0]
    WHERE [m0].[MedicationId] IN (
        SELECT [n].[value]
        FROM OPENJSON(@__newMedicationIdsList_1) WITH ([value] int '$') AS [n]
    )
) AS [t] ON [m].[ActiveIngredientId] <> [t].[ActiveIngredientId]
CROSS JOIN [MedicationInteractions] AS [m1]
WHERE [p].[PatientId] = @__8__locals1_patientId_0 AND (([m1].[ActiveIngredient1Id] = [m].[ActiveIngredientId] AND [m1].[ActiveIngredient2Id] = [t].[ActiveIngredientId]) OR ([m1].[ActiveIngredient1Id] = [t].[ActiveIngredientId] AND [m1].[ActiveIngredient2Id] = [m].[ActiveIngredientId]))" (0723d8ff)
2025-11-05T12:00:54.5250705+02:00 0HNGSA64NS4UC:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prescriptions] ([Date], [DispenserId], [IsUrgent], [Note], [PatientId], [PrescriberId], [Status])
OUTPUT INSERTED.[PrescriptionId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2025-11-05T12:00:54.5846406+02:00 0HNGSA64NS4UC:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PrescribedMedications] ([Instruction], [MedicationId], [PrescriptionId], [Quantity])
OUTPUT INSERTED.[PrescribedMedicationId]
VALUES (@p0, @p1, @p2, @p3);" (0723d8ff)
2025-11-05T12:00:54.5883496+02:00 0HNGSA64NS4UC:00000003 [INF] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType11`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (605b4265)
2025-11-05T12:00:54.5942613+02:00 0HNGSA64NS4UC:00000003 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 258.4158ms (afa2e885)
2025-11-05T12:00:54.5943583+02:00 0HNGSA64NS4UC:00000003 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T12:00:54.5946767+02:00 0HNGSA64NS4UC:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 200 null "application/json; charset=utf-8" 262.9278ms (74253ad3)
2025-11-05T13:12:58.2803733+02:00  [INF] User profile is available. Using '"C:\Users\ThatoTs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-11-05T13:12:58.5643874+02:00  [INF] Now listening on: "https://localhost:7150" (d826f4b8)
2025-11-05T13:12:58.5664772+02:00  [INF] Now listening on: "http://localhost:5031" (d826f4b8)
2025-11-05T13:12:58.6125040+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-11-05T13:12:58.6155896+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-11-05T13:12:58.6190619+02:00  [INF] Content root path: "D:\HomeSpace\E_Prescribing_API\E_Prescribing_API" (cc26f24e)
2025-11-05T13:12:59.3815934+02:00 0HNGSBH3G5BLD:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - null null (d509f86a)
2025-11-05T13:12:59.5836249+02:00 0HNGSBH3G5BLD:00000003 [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:12:59.5886198+02:00 0HNGSBH3G5BLD:00000003 [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:12:59.6023353+02:00 0HNGSBH3G5BLD:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - 301 0 null 227.5326ms (74253ad3)
2025-11-05T13:12:59.6105405+02:00 0HNGSBH3G5BLD:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - null null (d509f86a)
2025-11-05T13:12:59.6212303+02:00 0HNGSBH3G5BLD:00000005 [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:12:59.6239011+02:00 0HNGSBH3G5BLD:00000005 [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:12:59.6877486+02:00 0HNGSBH3G5BLD:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 77.2647ms (74253ad3)
2025-11-05T13:12:59.7041751+02:00 0HNGSBH3G5BLD:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-11-05T13:12:59.7047605+02:00 0HNGSBH3G5BLD:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - null null (d509f86a)
2025-11-05T13:12:59.7054540+02:00 0HNGSBH3G5BLD:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - null null (d509f86a)
2025-11-05T13:12:59.7084720+02:00 0HNGSBH3G5BLD:00000009 [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:12:59.7124705+02:00 0HNGSBH3G5BLD:00000009 [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:12:59.7223397+02:00 0HNGSBH3G5BLD:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - 200 13770 "application/javascript; charset=utf-8" 18.6598ms (74253ad3)
2025-11-05T13:12:59.7322531+02:00 0HNGSBH3G5BLD:00000009 [INF] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T13:12:59.7324999+02:00 0HNGSBH3G5BLD:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 27.7637ms (74253ad3)
2025-11-05T13:12:59.7714015+02:00 0HNGSBH3G5BLD:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 65.9732ms (74253ad3)
2025-11-05T13:12:59.8098898+02:00 0HNGSBH3G5BLD:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-16x16.png""" - null null (d509f86a)
2025-11-05T13:12:59.8109180+02:00 0HNGSBH3G5BLD:0000000D [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:12:59.8141165+02:00 0HNGSBH3G5BLD:0000000D [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:12:59.8153793+02:00 0HNGSBH3G5BLD:0000000D [INF] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T13:12:59.8155968+02:00 0HNGSBH3G5BLD:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-16x16.png""" - 499 665 "image/png" 6.6236ms (74253ad3)
2025-11-05T13:12:59.8642176+02:00 0HNGSBH3G5BLD:0000000F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-11-05T13:12:59.8655730+02:00 0HNGSBH3G5BLD:0000000F [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:12:59.8753789+02:00 0HNGSBH3G5BLD:0000000F [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:13:00.0291005+02:00 0HNGSBH3G5BLD:0000000F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 165.4386ms (74253ad3)
2025-11-05T13:13:18.2005871+02:00  [INF] User profile is available. Using '"C:\Users\ThatoTs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-11-05T13:13:18.5783042+02:00  [INF] Now listening on: "https://localhost:7150" (d826f4b8)
2025-11-05T13:13:18.5810323+02:00  [INF] Now listening on: "http://localhost:5031" (d826f4b8)
2025-11-05T13:13:18.6666811+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-11-05T13:13:18.6691296+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-11-05T13:13:18.6714957+02:00  [INF] Content root path: "D:\HomeSpace\E_Prescribing_API\E_Prescribing_API" (cc26f24e)
2025-11-05T13:13:19.4827249+02:00 0HNGSBH9FMCPR:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - null null (d509f86a)
2025-11-05T13:13:19.6646724+02:00 0HNGSBH9FMCPR:00000003 [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:13:19.6706089+02:00 0HNGSBH9FMCPR:00000003 [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:13:19.6857990+02:00 0HNGSBH9FMCPR:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - 301 0 null 211.132ms (74253ad3)
2025-11-05T13:13:19.6955399+02:00 0HNGSBH9FMCPR:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - null null (d509f86a)
2025-11-05T13:13:19.7072516+02:00 0HNGSBH9FMCPR:00000005 [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:13:19.7105240+02:00 0HNGSBH9FMCPR:00000005 [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:13:19.7942091+02:00 0HNGSBH9FMCPR:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 98.8344ms (74253ad3)
2025-11-05T13:13:19.8222708+02:00 0HNGSBH9FMCPR:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - null null (d509f86a)
2025-11-05T13:13:19.8254257+02:00 0HNGSBH9FMCPR:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-11-05T13:13:19.8398793+02:00 0HNGSBH9FMCPR:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - 200 13770 "application/javascript; charset=utf-8" 14.6639ms (74253ad3)
2025-11-05T13:13:19.8940976+02:00 0HNGSBH9FMCPR:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 71.99ms (74253ad3)
2025-11-05T13:13:19.9425244+02:00 0HNGSBH9FMCPR:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-32x32.png""" - null null (d509f86a)
2025-11-05T13:13:19.9458012+02:00 0HNGSBH9FMCPR:0000000B [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:13:19.9500531+02:00 0HNGSBH9FMCPR:0000000B [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:13:19.9612319+02:00 0HNGSBH9FMCPR:0000000B [INF] Sending file. Request path: '"/favicon-32x32.png"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T13:13:19.9614453+02:00 0HNGSBH9FMCPR:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-32x32.png""" - 499 628 "image/png" 19.1296ms (74253ad3)
2025-11-05T13:13:19.9960682+02:00 0HNGSBH9FMCPR:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-11-05T13:13:19.9968100+02:00 0HNGSBH9FMCPR:0000000D [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:13:20.0000844+02:00 0HNGSBH9FMCPR:0000000D [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:13:20.1496725+02:00 0HNGSBH9FMCPR:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 153.8747ms (74253ad3)
2025-11-05T13:13:47.1912902+02:00 0HNGSBH9FMCPR:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1497 (d509f86a)
2025-11-05T13:13:47.2166086+02:00 0HNGSBH9FMCPR:0000000F [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:13:47.2208424+02:00 0HNGSBH9FMCPR:0000000F [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:13:47.2383684+02:00 0HNGSBH9FMCPR:0000000F [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T13:13:47.2990940+02:00 0HNGSBH9FMCPR:0000000F [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T13:13:52.8301761+02:00 0HNGSBH9FMCPR:0000000F [INF] Executed DbCommand ("76"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[StaffId], [m].[ContactNumber], [m].[FacilityId], [m].[FullName], [m].[Name], [m].[RegistrationNumber], [m].[Surname], [m].[UserId]
FROM [MedicalStaffs] AS [m]
WHERE [m].[UserId] = 10" (0723d8ff)
2025-11-05T13:13:53.5525047+02:00 0HNGSBH9FMCPR:0000000F [INF] Executed DbCommand ("91"ms) [Parameters=["@__8__locals1_patientId_0='?' (DbType = Int32), @__medicationIdsList_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[IngredientName], [t].[MedicationName]
FROM (
    SELECT DISTINCT [a].[Name] AS [IngredientName], [m0].[Name] AS [MedicationName]
    FROM [PatientAllergies] AS [p]
    INNER JOIN [MedicationIngredients] AS [m] ON [p].[ActiveIngredientId] = [m].[ActiveIngredientId]
    INNER JOIN [ActiveIngredients] AS [a] ON [m].[ActiveIngredientId] = [a].[IngredientId]
    INNER JOIN [Medications] AS [m0] ON [m].[MedicationId] = [m0].[MedicationId]
    WHERE [p].[PatientId] = @__8__locals1_patientId_0 AND [m].[MedicationId] IN (
        SELECT [m1].[value]
        FROM OPENJSON(@__medicationIdsList_1) WITH ([value] int '$') AS [m1]
    )
) AS [t]" (0723d8ff)
2025-11-05T13:13:53.6130493+02:00 0HNGSBH9FMCPR:0000000F [INF] Executed DbCommand ("29"ms) [Parameters=["@__patientId_0='?' (DbType = Int32), @__medicationIdsList_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Name]
FROM (
    SELECT DISTINCT [a].[Name]
    FROM [ContraIndications] AS [c]
    INNER JOIN [ActiveIngredients] AS [a] ON [c].[ActiveIngredientId] = [a].[IngredientId]
    INNER JOIN [MedicationIngredients] AS [m] ON [a].[IngredientId] = [m].[ActiveIngredientId]
    INNER JOIN [PatientConditions] AS [p] ON @__patientId_0 = [p].[PatientId] AND [c].[ConditionDiagnosisId] = [p].[ConditionId]
    WHERE [m].[MedicationId] IN (
        SELECT [m0].[value]
        FROM OPENJSON(@__medicationIdsList_1) WITH ([value] int '$') AS [m0]
    )
) AS [t]" (0723d8ff)
2025-11-05T13:13:53.7052816+02:00 0HNGSBH9FMCPR:0000000F [INF] Executed DbCommand ("36"ms) [Parameters=["@__newMedicationIdsList_1='?' (Size = 4000), @__8__locals1_patientId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT DISTINCT [m1].[Description]
FROM [PatientMedications] AS [p]
INNER JOIN [MedicationIngredients] AS [m] ON [p].[MedicationId] = [m].[MedicationId]
INNER JOIN (
    SELECT [m0].[ActiveIngredientId]
    FROM [MedicationIngredients] AS [m0]
    WHERE [m0].[MedicationId] IN (
        SELECT [n].[value]
        FROM OPENJSON(@__newMedicationIdsList_1) WITH ([value] int '$') AS [n]
    )
) AS [t] ON [m].[ActiveIngredientId] <> [t].[ActiveIngredientId]
CROSS JOIN [MedicationInteractions] AS [m1]
WHERE [p].[PatientId] = @__8__locals1_patientId_0 AND (([m1].[ActiveIngredient1Id] = [m].[ActiveIngredientId] AND [m1].[ActiveIngredient2Id] = [t].[ActiveIngredientId]) OR ([m1].[ActiveIngredient1Id] = [t].[ActiveIngredientId] AND [m1].[ActiveIngredient2Id] = [m].[ActiveIngredientId]))" (0723d8ff)
2025-11-05T13:13:54.2829516+02:00 0HNGSBH9FMCPR:0000000F [INF] Executed DbCommand ("11"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prescriptions] ([Date], [DispenserId], [IsUrgent], [Note], [PatientId], [PrescriberId], [Status])
OUTPUT INSERTED.[PrescriptionId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2025-11-05T13:13:55.4625245+02:00 0HNGSBH9FMCPR:0000000F [INF] Executed DbCommand ("520"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PrescribedMedications] ([Instruction], [MedicationId], [PrescriptionId], [Quantity])
OUTPUT INSERTED.[PrescribedMedicationId]
VALUES (@p0, @p1, @p2, @p3);" (0723d8ff)
2025-11-05T13:13:55.4790339+02:00 0HNGSBH9FMCPR:0000000F [INF] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType11`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (605b4265)
2025-11-05T13:13:55.4954441+02:00 0HNGSBH9FMCPR:0000000F [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 8189.0098ms (afa2e885)
2025-11-05T13:13:55.4962976+02:00 0HNGSBH9FMCPR:0000000F [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T13:13:55.6200247+02:00 0HNGSBH9FMCPR:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 200 null "application/json; charset=utf-8" 8430.7806ms (74253ad3)
2025-11-05T13:51:42.4130350+02:00  [INF] User profile is available. Using '"C:\Users\ThatoTs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-11-05T13:51:42.6731327+02:00  [INF] Now listening on: "https://localhost:7150" (d826f4b8)
2025-11-05T13:51:42.6765842+02:00  [INF] Now listening on: "http://localhost:5031" (d826f4b8)
2025-11-05T13:51:42.7513405+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-11-05T13:51:42.7538870+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-11-05T13:51:42.7564664+02:00  [INF] Content root path: "D:\HomeSpace\E_Prescribing_API\E_Prescribing_API" (cc26f24e)
2025-11-05T13:51:43.7134482+02:00 0HNGSC6O62OP6:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - null null (d509f86a)
2025-11-05T13:51:43.8980165+02:00 0HNGSC6O62OP6:00000003 [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:51:43.9035970+02:00 0HNGSC6O62OP6:00000003 [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:51:43.9259113+02:00 0HNGSC6O62OP6:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - 301 0 null 220.6519ms (74253ad3)
2025-11-05T13:51:43.9345921+02:00 0HNGSC6O62OP6:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - null null (d509f86a)
2025-11-05T13:51:43.9465259+02:00 0HNGSC6O62OP6:00000005 [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:51:43.9491034+02:00 0HNGSC6O62OP6:00000005 [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:51:44.0336336+02:00 0HNGSC6O62OP6:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 99.1748ms (74253ad3)
2025-11-05T13:51:44.0545954+02:00 0HNGSC6O62OP6:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - null null (d509f86a)
2025-11-05T13:51:44.0586538+02:00 0HNGSC6O62OP6:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-11-05T13:51:44.0722696+02:00 0HNGSC6O62OP6:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - 200 13770 "application/javascript; charset=utf-8" 16.9755ms (74253ad3)
2025-11-05T13:51:44.1193515+02:00 0HNGSC6O62OP6:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 65.0691ms (74253ad3)
2025-11-05T13:51:44.2537946+02:00 0HNGSC6O62OP6:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-11-05T13:51:44.2569405+02:00 0HNGSC6O62OP6:0000000B [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:51:44.2608533+02:00 0HNGSC6O62OP6:0000000B [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:51:44.3959804+02:00 0HNGSC6O62OP6:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 143.2464ms (74253ad3)
2025-11-05T13:52:05.5158823+02:00 0HNGSC6O62OP6:0000000D [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1497 (d509f86a)
2025-11-05T13:52:05.5207994+02:00 0HNGSC6O62OP6:0000000D [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:52:05.5245474+02:00 0HNGSC6O62OP6:0000000D [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:52:05.5298316+02:00 0HNGSC6O62OP6:0000000D [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T13:52:05.5706554+02:00 0HNGSC6O62OP6:0000000D [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T13:52:09.3754838+02:00 0HNGSC6O62OP6:0000000D [INF] Executed DbCommand ("69"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[StaffId], [m].[ContactNumber], [m].[FacilityId], [m].[FullName], [m].[Name], [m].[RegistrationNumber], [m].[Surname], [m].[UserId]
FROM [MedicalStaffs] AS [m]
WHERE [m].[UserId] = 10" (0723d8ff)
2025-11-05T13:52:09.8585995+02:00 0HNGSC6O62OP6:0000000D [INF] Executed DbCommand ("83"ms) [Parameters=["@__8__locals1_patientId_0='?' (DbType = Int32), @__medicationIdsList_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[IngredientName], [t].[MedicationName]
FROM (
    SELECT DISTINCT [a].[Name] AS [IngredientName], [m0].[Name] AS [MedicationName]
    FROM [PatientAllergies] AS [p]
    INNER JOIN [MedicationIngredients] AS [m] ON [p].[ActiveIngredientId] = [m].[ActiveIngredientId]
    INNER JOIN [ActiveIngredients] AS [a] ON [m].[ActiveIngredientId] = [a].[IngredientId]
    INNER JOIN [Medications] AS [m0] ON [m].[MedicationId] = [m0].[MedicationId]
    WHERE [p].[PatientId] = @__8__locals1_patientId_0 AND [m].[MedicationId] IN (
        SELECT [m1].[value]
        FROM OPENJSON(@__medicationIdsList_1) WITH ([value] int '$') AS [m1]
    )
) AS [t]" (0723d8ff)
2025-11-05T13:52:09.9271723+02:00 0HNGSC6O62OP6:0000000D [INF] Executed DbCommand ("38"ms) [Parameters=["@__patientId_0='?' (DbType = Int32), @__medicationIdsList_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Name]
FROM (
    SELECT DISTINCT [a].[Name]
    FROM [ContraIndications] AS [c]
    INNER JOIN [ActiveIngredients] AS [a] ON [c].[ActiveIngredientId] = [a].[IngredientId]
    INNER JOIN [MedicationIngredients] AS [m] ON [a].[IngredientId] = [m].[ActiveIngredientId]
    INNER JOIN [PatientConditions] AS [p] ON @__patientId_0 = [p].[PatientId] AND [c].[ConditionDiagnosisId] = [p].[ConditionId]
    WHERE [m].[MedicationId] IN (
        SELECT [m0].[value]
        FROM OPENJSON(@__medicationIdsList_1) WITH ([value] int '$') AS [m0]
    )
) AS [t]" (0723d8ff)
2025-11-05T13:52:09.9991323+02:00 0HNGSC6O62OP6:0000000D [INF] Executed DbCommand ("36"ms) [Parameters=["@__newMedicationIdsList_1='?' (Size = 4000), @__8__locals1_patientId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT DISTINCT [m1].[Description]
FROM [PatientMedications] AS [p]
INNER JOIN [MedicationIngredients] AS [m] ON [p].[MedicationId] = [m].[MedicationId]
INNER JOIN (
    SELECT [m0].[ActiveIngredientId]
    FROM [MedicationIngredients] AS [m0]
    WHERE [m0].[MedicationId] IN (
        SELECT [n].[value]
        FROM OPENJSON(@__newMedicationIdsList_1) WITH ([value] int '$') AS [n]
    )
) AS [t] ON [m].[ActiveIngredientId] <> [t].[ActiveIngredientId]
CROSS JOIN [MedicationInteractions] AS [m1]
WHERE [p].[PatientId] = @__8__locals1_patientId_0 AND (([m1].[ActiveIngredient1Id] = [m].[ActiveIngredientId] AND [m1].[ActiveIngredient2Id] = [t].[ActiveIngredientId]) OR ([m1].[ActiveIngredient1Id] = [t].[ActiveIngredientId] AND [m1].[ActiveIngredient2Id] = [m].[ActiveIngredientId]))" (0723d8ff)
2025-11-05T13:52:10.3637650+02:00 0HNGSC6O62OP6:0000000D [INF] Executed DbCommand ("18"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prescriptions] ([Date], [DispenserId], [IsUrgent], [Note], [PatientId], [PrescriberId], [Status])
OUTPUT INSERTED.[PrescriptionId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2025-11-05T13:52:10.4508214+02:00 0HNGSC6O62OP6:0000000D [INF] Executed DbCommand ("5"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PrescribedMedications] ([Instruction], [MedicationId], [PrescriptionId], [Quantity])
OUTPUT INSERTED.[PrescribedMedicationId]
VALUES (@p0, @p1, @p2, @p3);" (0723d8ff)
2025-11-05T13:52:10.4631673+02:00 0HNGSC6O62OP6:0000000D [INF] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (605b4265)
2025-11-05T13:52:10.4776214+02:00 0HNGSC6O62OP6:0000000D [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 4900.6556ms (afa2e885)
2025-11-05T13:52:10.4786085+02:00 0HNGSC6O62OP6:0000000D [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T13:52:10.4901687+02:00 0HNGSC6O62OP6:0000000D [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 200 null "application/json; charset=utf-8" 4974.4283ms (74253ad3)
2025-11-05T13:53:16.7146460+02:00 0HNGSC6O62OP6:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1497 (d509f86a)
2025-11-05T13:53:16.7198289+02:00 0HNGSC6O62OP6:0000000F [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:53:16.7230094+02:00 0HNGSC6O62OP6:0000000F [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:53:16.7234495+02:00 0HNGSC6O62OP6:0000000F [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T13:53:16.7243742+02:00 0HNGSC6O62OP6:0000000F [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T13:53:16.7778789+02:00 0HNGSC6O62OP6:0000000F [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[StaffId], [m].[ContactNumber], [m].[FacilityId], [m].[FullName], [m].[Name], [m].[RegistrationNumber], [m].[Surname], [m].[UserId]
FROM [MedicalStaffs] AS [m]
WHERE [m].[UserId] = 10" (0723d8ff)
2025-11-05T13:53:16.8470890+02:00 0HNGSC6O62OP6:0000000F [INF] Executed DbCommand ("62"ms) [Parameters=["@__8__locals1_patientId_0='?' (DbType = Int32), @__medicationIdsList_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[IngredientName], [t].[MedicationName]
FROM (
    SELECT DISTINCT [a].[Name] AS [IngredientName], [m0].[Name] AS [MedicationName]
    FROM [PatientAllergies] AS [p]
    INNER JOIN [MedicationIngredients] AS [m] ON [p].[ActiveIngredientId] = [m].[ActiveIngredientId]
    INNER JOIN [ActiveIngredients] AS [a] ON [m].[ActiveIngredientId] = [a].[IngredientId]
    INNER JOIN [Medications] AS [m0] ON [m].[MedicationId] = [m0].[MedicationId]
    WHERE [p].[PatientId] = @__8__locals1_patientId_0 AND [m].[MedicationId] IN (
        SELECT [m1].[value]
        FROM OPENJSON(@__medicationIdsList_1) WITH ([value] int '$') AS [m1]
    )
) AS [t]" (0723d8ff)
2025-11-05T13:53:16.8805947+02:00 0HNGSC6O62OP6:0000000F [INF] Executed DbCommand ("28"ms) [Parameters=["@__patientId_0='?' (DbType = Int32), @__medicationIdsList_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Name]
FROM (
    SELECT DISTINCT [a].[Name]
    FROM [ContraIndications] AS [c]
    INNER JOIN [ActiveIngredients] AS [a] ON [c].[ActiveIngredientId] = [a].[IngredientId]
    INNER JOIN [MedicationIngredients] AS [m] ON [a].[IngredientId] = [m].[ActiveIngredientId]
    INNER JOIN [PatientConditions] AS [p] ON @__patientId_0 = [p].[PatientId] AND [c].[ConditionDiagnosisId] = [p].[ConditionId]
    WHERE [m].[MedicationId] IN (
        SELECT [m0].[value]
        FROM OPENJSON(@__medicationIdsList_1) WITH ([value] int '$') AS [m0]
    )
) AS [t]" (0723d8ff)
2025-11-05T13:53:16.9299760+02:00 0HNGSC6O62OP6:0000000F [INF] Executed DbCommand ("42"ms) [Parameters=["@__newMedicationIdsList_1='?' (Size = 4000), @__8__locals1_patientId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT DISTINCT [m1].[Description]
FROM [PatientMedications] AS [p]
INNER JOIN [MedicationIngredients] AS [m] ON [p].[MedicationId] = [m].[MedicationId]
INNER JOIN (
    SELECT [m0].[ActiveIngredientId]
    FROM [MedicationIngredients] AS [m0]
    WHERE [m0].[MedicationId] IN (
        SELECT [n].[value]
        FROM OPENJSON(@__newMedicationIdsList_1) WITH ([value] int '$') AS [n]
    )
) AS [t] ON [m].[ActiveIngredientId] <> [t].[ActiveIngredientId]
CROSS JOIN [MedicationInteractions] AS [m1]
WHERE [p].[PatientId] = @__8__locals1_patientId_0 AND (([m1].[ActiveIngredient1Id] = [m].[ActiveIngredientId] AND [m1].[ActiveIngredient2Id] = [t].[ActiveIngredientId]) OR ([m1].[ActiveIngredient1Id] = [t].[ActiveIngredientId] AND [m1].[ActiveIngredient2Id] = [m].[ActiveIngredientId]))" (0723d8ff)
2025-11-05T13:53:16.9462972+02:00 0HNGSC6O62OP6:0000000F [INF] Executed DbCommand ("9"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prescriptions] ([Date], [DispenserId], [IsUrgent], [Note], [PatientId], [PrescriberId], [Status])
OUTPUT INSERTED.[PrescriptionId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2025-11-05T13:53:16.9568560+02:00 0HNGSC6O62OP6:0000000F [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PrescribedMedications] ([Instruction], [MedicationId], [PrescriptionId], [Quantity])
OUTPUT INSERTED.[PrescribedMedicationId]
VALUES (@p0, @p1, @p2, @p3);" (0723d8ff)
2025-11-05T13:53:16.9581012+02:00 0HNGSC6O62OP6:0000000F [INF] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (605b4265)
2025-11-05T13:53:16.9584581+02:00 0HNGSC6O62OP6:0000000F [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 233.9337ms (afa2e885)
2025-11-05T13:53:16.9585045+02:00 0HNGSC6O62OP6:0000000F [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T13:53:16.9587379+02:00 0HNGSC6O62OP6:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 200 null "application/json; charset=utf-8" 244.1963ms (74253ad3)
2025-11-05T13:53:29.8859851+02:00 0HNGSC6O62OP6:00000011 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1497 (d509f86a)
2025-11-05T13:53:29.8865681+02:00 0HNGSC6O62OP6:00000011 [INF] "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:53:29.8904021+02:00 0HNGSC6O62OP6:00000011 [INF] "Identity.BearerAndApplication" was not authenticated. Failure message: "Unprotect ticket failed" (48071232)
2025-11-05T13:53:29.8905278+02:00 0HNGSC6O62OP6:00000011 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T13:53:29.8906517+02:00 0HNGSC6O62OP6:00000011 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T13:53:30.0473143+02:00 0HNGSC6O62OP6:00000011 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[StaffId], [m].[ContactNumber], [m].[FacilityId], [m].[FullName], [m].[Name], [m].[RegistrationNumber], [m].[Surname], [m].[UserId]
FROM [MedicalStaffs] AS [m]
WHERE [m].[UserId] = 10" (0723d8ff)
2025-11-05T13:53:30.0546792+02:00 0HNGSC6O62OP6:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__8__locals1_patientId_0='?' (DbType = Int32), @__medicationIdsList_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[IngredientName], [t].[MedicationName]
FROM (
    SELECT DISTINCT [a].[Name] AS [IngredientName], [m0].[Name] AS [MedicationName]
    FROM [PatientAllergies] AS [p]
    INNER JOIN [MedicationIngredients] AS [m] ON [p].[ActiveIngredientId] = [m].[ActiveIngredientId]
    INNER JOIN [ActiveIngredients] AS [a] ON [m].[ActiveIngredientId] = [a].[IngredientId]
    INNER JOIN [Medications] AS [m0] ON [m].[MedicationId] = [m0].[MedicationId]
    WHERE [p].[PatientId] = @__8__locals1_patientId_0 AND [m].[MedicationId] IN (
        SELECT [m1].[value]
        FROM OPENJSON(@__medicationIdsList_1) WITH ([value] int '$') AS [m1]
    )
) AS [t]" (0723d8ff)
2025-11-05T13:53:30.0646373+02:00 0HNGSC6O62OP6:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__patientId_0='?' (DbType = Int32), @__medicationIdsList_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Name]
FROM (
    SELECT DISTINCT [a].[Name]
    FROM [ContraIndications] AS [c]
    INNER JOIN [ActiveIngredients] AS [a] ON [c].[ActiveIngredientId] = [a].[IngredientId]
    INNER JOIN [MedicationIngredients] AS [m] ON [a].[IngredientId] = [m].[ActiveIngredientId]
    INNER JOIN [PatientConditions] AS [p] ON @__patientId_0 = [p].[PatientId] AND [c].[ConditionDiagnosisId] = [p].[ConditionId]
    WHERE [m].[MedicationId] IN (
        SELECT [m0].[value]
        FROM OPENJSON(@__medicationIdsList_1) WITH ([value] int '$') AS [m0]
    )
) AS [t]" (0723d8ff)
2025-11-05T13:53:30.0800129+02:00 0HNGSC6O62OP6:00000011 [INF] Executed DbCommand ("7"ms) [Parameters=["@__newMedicationIdsList_1='?' (Size = 4000), @__8__locals1_patientId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT DISTINCT [m1].[Description]
FROM [PatientMedications] AS [p]
INNER JOIN [MedicationIngredients] AS [m] ON [p].[MedicationId] = [m].[MedicationId]
INNER JOIN (
    SELECT [m0].[ActiveIngredientId]
    FROM [MedicationIngredients] AS [m0]
    WHERE [m0].[MedicationId] IN (
        SELECT [n].[value]
        FROM OPENJSON(@__newMedicationIdsList_1) WITH ([value] int '$') AS [n]
    )
) AS [t] ON [m].[ActiveIngredientId] <> [t].[ActiveIngredientId]
CROSS JOIN [MedicationInteractions] AS [m1]
WHERE [p].[PatientId] = @__8__locals1_patientId_0 AND (([m1].[ActiveIngredient1Id] = [m].[ActiveIngredientId] AND [m1].[ActiveIngredient2Id] = [t].[ActiveIngredientId]) OR ([m1].[ActiveIngredient1Id] = [t].[ActiveIngredientId] AND [m1].[ActiveIngredient2Id] = [m].[ActiveIngredientId]))" (0723d8ff)
2025-11-05T13:53:30.0912910+02:00 0HNGSC6O62OP6:00000011 [INF] Executed DbCommand ("6"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prescriptions] ([Date], [DispenserId], [IsUrgent], [Note], [PatientId], [PrescriberId], [Status])
OUTPUT INSERTED.[PrescriptionId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2025-11-05T13:53:30.0985082+02:00 0HNGSC6O62OP6:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PrescribedMedications] ([Instruction], [MedicationId], [PrescriptionId], [Quantity])
OUTPUT INSERTED.[PrescribedMedicationId]
VALUES (@p0, @p1, @p2, @p3);" (0723d8ff)
2025-11-05T13:53:30.0993069+02:00 0HNGSC6O62OP6:00000011 [INF] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (605b4265)
2025-11-05T13:53:30.0996667+02:00 0HNGSC6O62OP6:00000011 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 208.9187ms (afa2e885)
2025-11-05T13:53:30.0997847+02:00 0HNGSC6O62OP6:00000011 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T13:53:30.1000926+02:00 0HNGSC6O62OP6:00000011 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 200 null "application/json; charset=utf-8" 214.5396ms (74253ad3)
2025-11-05T17:47:52.3241923+02:00  [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T17:47:52.3578126+02:00  [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T17:47:52.3610753+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T17:47:52.3631976+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T17:47:52.3831087+02:00  [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2025-11-05T17:47:52.4074382+02:00  [INF] Applying migration '"20251105154721_addNavProperty"'. (0e2ac64d)
2025-11-05T17:47:53.1728015+02:00  [INF] Executed DbCommand ("639"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""EXEC sp_rename N'[Patients].[MedicalSaffId]', N'MedicalStaffId', N'COLUMN';" (0723d8ff)
2025-11-05T17:47:53.2003393+02:00  [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Suburbs_CityId] ON [Suburbs] ([CityId]);" (0723d8ff)
2025-11-05T17:47:53.2125233+02:00  [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PrescribedMedications_MedicationId] ON [PrescribedMedications] ([MedicationId]);" (0723d8ff)
2025-11-05T17:47:53.2231667+02:00  [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PrescribedMedications_PrescriptionId] ON [PrescribedMedications] ([PrescriptionId]);" (0723d8ff)
2025-11-05T17:47:53.2346592+02:00  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Patients_MedicalStaffId] ON [Patients] ([MedicalStaffId]);" (0723d8ff)
2025-11-05T17:47:53.2484045+02:00  [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Patients_SuburbId] ON [Patients] ([SuburbId]);" (0723d8ff)
2025-11-05T17:47:53.2630997+02:00  [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PatientMedications_MedicationId] ON [PatientMedications] ([MedicationId]);" (0723d8ff)
2025-11-05T17:47:53.2772705+02:00  [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PatientMedications_PatientId] ON [PatientMedications] ([PatientId]);" (0723d8ff)
2025-11-05T17:47:53.2933142+02:00  [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PatientConditions_ConditionId] ON [PatientConditions] ([ConditionId]);" (0723d8ff)
2025-11-05T17:47:53.3076171+02:00  [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Medications_DosageFormId] ON [Medications] ([DosageFormId]);" (0723d8ff)
2025-11-05T17:47:53.3186807+02:00  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_MedicationIngredients_ActiveIngredientId] ON [MedicationIngredients] ([ActiveIngredientId]);" (0723d8ff)
2025-11-05T17:47:53.3310113+02:00  [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_MedicationIngredients_MedicationId] ON [MedicationIngredients] ([MedicationId]);" (0723d8ff)
2025-11-05T17:47:53.3455870+02:00  [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_MedicalStaffs_FacilityId] ON [MedicalStaffs] ([FacilityId]);" (0723d8ff)
2025-11-05T17:47:53.3596784+02:00  [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_MedicalStaffs_UserId] ON [MedicalStaffs] ([UserId]);" (0723d8ff)
2025-11-05T17:47:53.3669174+02:00  [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Facilities_FacilityTypeId] ON [Facilities] ([FacilityTypeId]);" (0723d8ff)
2025-11-05T17:47:53.3738060+02:00  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_ContraIndications_ActiveIngredientId] ON [ContraIndications] ([ActiveIngredientId]);" (0723d8ff)
2025-11-05T17:47:53.9423033+02:00  [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_ContraIndications_ConditionDiagnosisId] ON [ContraIndications] ([ConditionDiagnosisId]);" (0723d8ff)
2025-11-05T17:47:53.9672230+02:00  [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Cities_ProvinceId] ON [Cities] ([ProvinceId]);" (0723d8ff)
2025-11-05T17:47:53.9814517+02:00  [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Cities] ADD CONSTRAINT [FK_Cities_Provinces_ProvinceId] FOREIGN KEY ([ProvinceId]) REFERENCES [Provinces] ([ProvinceId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:47:53.9928528+02:00  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [ContraIndications] ADD CONSTRAINT [FK_ContraIndications_ActiveIngredients_ActiveIngredientId] FOREIGN KEY ([ActiveIngredientId]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:47:54.0059038+02:00  [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [ContraIndications] ADD CONSTRAINT [FK_ContraIndications_ConditionDiagnosis_ConditionDiagnosisId] FOREIGN KEY ([ConditionDiagnosisId]) REFERENCES [ConditionDiagnosis] ([ConditionId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:47:54.0224272+02:00  [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Facilities] ADD CONSTRAINT [FK_Facilities_FacilitiesTypes_FacilityTypeId] FOREIGN KEY ([FacilityTypeId]) REFERENCES [FacilitiesTypes] ([FacilityTypeId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:47:54.0373647+02:00  [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicalStaffs] ADD CONSTRAINT [FK_MedicalStaffs_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:47:55.1495851+02:00  [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicalStaffs] ADD CONSTRAINT [FK_MedicalStaffs_Facilities_FacilityId] FOREIGN KEY ([FacilityId]) REFERENCES [Facilities] ([FacilityId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:47:55.1564104+02:00  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicationIngredients] ADD CONSTRAINT [FK_MedicationIngredients_ActiveIngredients_ActiveIngredientId] FOREIGN KEY ([ActiveIngredientId]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:47:55.1617289+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicationIngredients] ADD CONSTRAINT [FK_MedicationIngredients_Medications_MedicationId] FOREIGN KEY ([MedicationId]) REFERENCES [Medications] ([MedicationId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:47:55.1708763+02:00  [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Medications] ADD CONSTRAINT [FK_Medications_DosageForms_DosageFormId] FOREIGN KEY ([DosageFormId]) REFERENCES [DosageForms] ([DosageId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:47:55.1776227+02:00  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientConditions] ADD CONSTRAINT [FK_PatientConditions_ConditionDiagnosis_ConditionId] FOREIGN KEY ([ConditionId]) REFERENCES [ConditionDiagnosis] ([ConditionId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:47:55.1835197+02:00  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientMedications] ADD CONSTRAINT [FK_PatientMedications_Medications_MedicationId] FOREIGN KEY ([MedicationId]) REFERENCES [Medications] ([MedicationId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:47:55.1888916+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientMedications] ADD CONSTRAINT [FK_PatientMedications_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:47:55.9997379+02:00  [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Patients] ADD CONSTRAINT [FK_Patients_MedicalStaffs_MedicalStaffId] FOREIGN KEY ([MedicalStaffId]) REFERENCES [MedicalStaffs] ([StaffId]);" (0723d8ff)
2025-11-05T17:47:56.0079949+02:00  [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Patients] ADD CONSTRAINT [FK_Patients_Suburbs_SuburbId] FOREIGN KEY ([SuburbId]) REFERENCES [Suburbs] ([SuburbId]);" (0723d8ff)
2025-11-05T17:47:56.0392554+02:00  [ERR] Failed executing DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PrescribedMedications] ADD CONSTRAINT [FK_PrescribedMedications_Medications_MedicationId] FOREIGN KEY ([MedicationId]) REFERENCES [Medications] ([MedicationId]) ON DELETE CASCADE;" (627a98df)
2025-11-05T17:53:19.0665791+02:00  [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T17:53:19.1123076+02:00  [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T17:53:19.1150008+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T17:53:19.1157486+02:00  [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T17:53:19.1347153+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2025-11-05T17:53:19.1569310+02:00  [INF] Applying migration '"20251105154721_addNavProperty"'. (0e2ac64d)
2025-11-05T17:53:19.7869131+02:00  [INF] Executed DbCommand ("495"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""EXEC sp_rename N'[Patients].[MedicalSaffId]', N'MedicalStaffId', N'COLUMN';" (0723d8ff)
2025-11-05T17:53:19.8082804+02:00  [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Suburbs_CityId] ON [Suburbs] ([CityId]);" (0723d8ff)
2025-11-05T17:53:19.8221906+02:00  [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PrescribedMedications_MedicationId] ON [PrescribedMedications] ([MedicationId]);" (0723d8ff)
2025-11-05T17:53:19.8327761+02:00  [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PrescribedMedications_PrescriptionId] ON [PrescribedMedications] ([PrescriptionId]);" (0723d8ff)
2025-11-05T17:53:19.8448767+02:00  [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Patients_MedicalStaffId] ON [Patients] ([MedicalStaffId]);" (0723d8ff)
2025-11-05T17:53:19.8597453+02:00  [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Patients_SuburbId] ON [Patients] ([SuburbId]);" (0723d8ff)
2025-11-05T17:53:19.8719867+02:00  [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PatientMedications_MedicationId] ON [PatientMedications] ([MedicationId]);" (0723d8ff)
2025-11-05T17:53:19.8778401+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PatientMedications_PatientId] ON [PatientMedications] ([PatientId]);" (0723d8ff)
2025-11-05T17:53:19.8901798+02:00  [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PatientConditions_ConditionId] ON [PatientConditions] ([ConditionId]);" (0723d8ff)
2025-11-05T17:53:19.9024951+02:00  [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Medications_DosageFormId] ON [Medications] ([DosageFormId]);" (0723d8ff)
2025-11-05T17:53:19.9310003+02:00  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_MedicationIngredients_ActiveIngredientId] ON [MedicationIngredients] ([ActiveIngredientId]);" (0723d8ff)
2025-11-05T17:53:19.9432521+02:00  [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_MedicationIngredients_MedicationId] ON [MedicationIngredients] ([MedicationId]);" (0723d8ff)
2025-11-05T17:53:19.9569451+02:00  [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_MedicalStaffs_FacilityId] ON [MedicalStaffs] ([FacilityId]);" (0723d8ff)
2025-11-05T17:53:19.9748282+02:00  [INF] Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_MedicalStaffs_UserId] ON [MedicalStaffs] ([UserId]);" (0723d8ff)
2025-11-05T17:53:19.9838705+02:00  [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Facilities_FacilityTypeId] ON [Facilities] ([FacilityTypeId]);" (0723d8ff)
2025-11-05T17:53:19.9910351+02:00  [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_ContraIndications_ActiveIngredientId] ON [ContraIndications] ([ActiveIngredientId]);" (0723d8ff)
2025-11-05T17:53:19.9964850+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_ContraIndications_ConditionDiagnosisId] ON [ContraIndications] ([ConditionDiagnosisId]);" (0723d8ff)
2025-11-05T17:53:20.0036084+02:00  [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Cities_ProvinceId] ON [Cities] ([ProvinceId]);" (0723d8ff)
2025-11-05T17:53:20.0150391+02:00  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Cities] ADD CONSTRAINT [FK_Cities_Provinces_ProvinceId] FOREIGN KEY ([ProvinceId]) REFERENCES [Provinces] ([ProvinceId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:53:21.0643372+02:00  [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [ContraIndications] ADD CONSTRAINT [FK_ContraIndications_ActiveIngredients_ActiveIngredientId] FOREIGN KEY ([ActiveIngredientId]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:53:21.0734643+02:00  [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [ContraIndications] ADD CONSTRAINT [FK_ContraIndications_ConditionDiagnosis_ConditionDiagnosisId] FOREIGN KEY ([ConditionDiagnosisId]) REFERENCES [ConditionDiagnosis] ([ConditionId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:53:21.0837144+02:00  [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Facilities] ADD CONSTRAINT [FK_Facilities_FacilitiesTypes_FacilityTypeId] FOREIGN KEY ([FacilityTypeId]) REFERENCES [FacilitiesTypes] ([FacilityTypeId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:53:21.0932906+02:00  [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicalStaffs] ADD CONSTRAINT [FK_MedicalStaffs_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:53:21.1039221+02:00  [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicalStaffs] ADD CONSTRAINT [FK_MedicalStaffs_Facilities_FacilityId] FOREIGN KEY ([FacilityId]) REFERENCES [Facilities] ([FacilityId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:53:21.1092241+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicationIngredients] ADD CONSTRAINT [FK_MedicationIngredients_ActiveIngredients_ActiveIngredientId] FOREIGN KEY ([ActiveIngredientId]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:53:21.1147529+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicationIngredients] ADD CONSTRAINT [FK_MedicationIngredients_Medications_MedicationId] FOREIGN KEY ([MedicationId]) REFERENCES [Medications] ([MedicationId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:53:22.1831505+02:00  [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Medications] ADD CONSTRAINT [FK_Medications_DosageForms_DosageFormId] FOREIGN KEY ([DosageFormId]) REFERENCES [DosageForms] ([DosageId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:53:22.1897630+02:00  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientConditions] ADD CONSTRAINT [FK_PatientConditions_ConditionDiagnosis_ConditionId] FOREIGN KEY ([ConditionId]) REFERENCES [ConditionDiagnosis] ([ConditionId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:53:22.1975801+02:00  [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientMedications] ADD CONSTRAINT [FK_PatientMedications_Medications_MedicationId] FOREIGN KEY ([MedicationId]) REFERENCES [Medications] ([MedicationId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:53:22.2052624+02:00  [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientMedications] ADD CONSTRAINT [FK_PatientMedications_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:53:22.2164740+02:00  [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Patients] ADD CONSTRAINT [FK_Patients_MedicalStaffs_MedicalStaffId] FOREIGN KEY ([MedicalStaffId]) REFERENCES [MedicalStaffs] ([StaffId]);" (0723d8ff)
2025-11-05T17:53:22.2282243+02:00  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Patients] ADD CONSTRAINT [FK_Patients_Suburbs_SuburbId] FOREIGN KEY ([SuburbId]) REFERENCES [Suburbs] ([SuburbId]);" (0723d8ff)
2025-11-05T17:53:22.2565665+02:00  [ERR] Failed executing DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PrescribedMedications] ADD CONSTRAINT [FK_PrescribedMedications_Medications_MedicationId] FOREIGN KEY ([MedicationId]) REFERENCES [Medications] ([MedicationId]) ON DELETE CASCADE;" (627a98df)
2025-11-05T17:55:50.1712104+02:00  [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T17:55:50.2123471+02:00  [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T17:55:50.2160190+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T17:55:50.2171235+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T17:55:50.2330746+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2025-11-05T17:55:50.2495186+02:00  [INF] Applying migration '"20251105154721_addNavProperty"'. (0e2ac64d)
2025-11-05T17:55:50.7631073+02:00  [INF] Executed DbCommand ("436"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""EXEC sp_rename N'[Patients].[MedicalSaffId]', N'MedicalStaffId', N'COLUMN';" (0723d8ff)
2025-11-05T17:55:50.7778350+02:00  [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Suburbs_CityId] ON [Suburbs] ([CityId]);" (0723d8ff)
2025-11-05T17:55:50.7800317+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PrescribedMedications_MedicationId] ON [PrescribedMedications] ([MedicationId]);" (0723d8ff)
2025-11-05T17:55:50.7814968+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PrescribedMedications_PrescriptionId] ON [PrescribedMedications] ([PrescriptionId]);" (0723d8ff)
2025-11-05T17:55:50.7863143+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Patients_MedicalStaffId] ON [Patients] ([MedicalStaffId]);" (0723d8ff)
2025-11-05T17:55:50.7901580+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Patients_SuburbId] ON [Patients] ([SuburbId]);" (0723d8ff)
2025-11-05T17:55:50.7945693+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PatientMedications_MedicationId] ON [PatientMedications] ([MedicationId]);" (0723d8ff)
2025-11-05T17:55:50.7981351+02:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PatientMedications_PatientId] ON [PatientMedications] ([PatientId]);" (0723d8ff)
2025-11-05T17:55:50.8021292+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_PatientConditions_ConditionId] ON [PatientConditions] ([ConditionId]);" (0723d8ff)
2025-11-05T17:55:50.8067362+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Medications_DosageFormId] ON [Medications] ([DosageFormId]);" (0723d8ff)
2025-11-05T17:55:50.8113178+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_MedicationIngredients_ActiveIngredientId] ON [MedicationIngredients] ([ActiveIngredientId]);" (0723d8ff)
2025-11-05T17:55:50.8151045+02:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_MedicationIngredients_MedicationId] ON [MedicationIngredients] ([MedicationId]);" (0723d8ff)
2025-11-05T17:55:50.8205825+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_MedicalStaffs_FacilityId] ON [MedicalStaffs] ([FacilityId]);" (0723d8ff)
2025-11-05T17:55:50.8240877+02:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_MedicalStaffs_UserId] ON [MedicalStaffs] ([UserId]);" (0723d8ff)
2025-11-05T17:55:50.8288297+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Facilities_FacilityTypeId] ON [Facilities] ([FacilityTypeId]);" (0723d8ff)
2025-11-05T17:55:50.8339115+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_ContraIndications_ActiveIngredientId] ON [ContraIndications] ([ActiveIngredientId]);" (0723d8ff)
2025-11-05T17:55:50.8375445+02:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_ContraIndications_ConditionDiagnosisId] ON [ContraIndications] ([ConditionDiagnosisId]);" (0723d8ff)
2025-11-05T17:55:50.8416769+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX [IX_Cities_ProvinceId] ON [Cities] ([ProvinceId]);" (0723d8ff)
2025-11-05T17:55:50.8523016+02:00  [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Cities] ADD CONSTRAINT [FK_Cities_Provinces_ProvinceId] FOREIGN KEY ([ProvinceId]) REFERENCES [Provinces] ([ProvinceId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:52.0197855+02:00  [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [ContraIndications] ADD CONSTRAINT [FK_ContraIndications_ActiveIngredients_ActiveIngredientId] FOREIGN KEY ([ActiveIngredientId]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:52.0775288+02:00  [INF] Executed DbCommand ("57"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [ContraIndications] ADD CONSTRAINT [FK_ContraIndications_ConditionDiagnosis_ConditionDiagnosisId] FOREIGN KEY ([ConditionDiagnosisId]) REFERENCES [ConditionDiagnosis] ([ConditionId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:52.0918105+02:00  [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Facilities] ADD CONSTRAINT [FK_Facilities_FacilitiesTypes_FacilityTypeId] FOREIGN KEY ([FacilityTypeId]) REFERENCES [FacilitiesTypes] ([FacilityTypeId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:52.1199170+02:00  [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicalStaffs] ADD CONSTRAINT [FK_MedicalStaffs_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:52.1262465+02:00  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicalStaffs] ADD CONSTRAINT [FK_MedicalStaffs_Facilities_FacilityId] FOREIGN KEY ([FacilityId]) REFERENCES [Facilities] ([FacilityId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:52.1370321+02:00  [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicationIngredients] ADD CONSTRAINT [FK_MedicationIngredients_ActiveIngredients_ActiveIngredientId] FOREIGN KEY ([ActiveIngredientId]) REFERENCES [ActiveIngredients] ([IngredientId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:53.6181658+02:00  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [MedicationIngredients] ADD CONSTRAINT [FK_MedicationIngredients_Medications_MedicationId] FOREIGN KEY ([MedicationId]) REFERENCES [Medications] ([MedicationId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:53.6273714+02:00  [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Medications] ADD CONSTRAINT [FK_Medications_DosageForms_DosageFormId] FOREIGN KEY ([DosageFormId]) REFERENCES [DosageForms] ([DosageId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:53.6312042+02:00  [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientConditions] ADD CONSTRAINT [FK_PatientConditions_ConditionDiagnosis_ConditionId] FOREIGN KEY ([ConditionId]) REFERENCES [ConditionDiagnosis] ([ConditionId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:53.6354072+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientMedications] ADD CONSTRAINT [FK_PatientMedications_Medications_MedicationId] FOREIGN KEY ([MedicationId]) REFERENCES [Medications] ([MedicationId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:53.6400632+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PatientMedications] ADD CONSTRAINT [FK_PatientMedications_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:53.6489971+02:00  [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Patients] ADD CONSTRAINT [FK_Patients_MedicalStaffs_MedicalStaffId] FOREIGN KEY ([MedicalStaffId]) REFERENCES [MedicalStaffs] ([StaffId]);" (0723d8ff)
2025-11-05T17:55:53.6539630+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Patients] ADD CONSTRAINT [FK_Patients_Suburbs_SuburbId] FOREIGN KEY ([SuburbId]) REFERENCES [Suburbs] ([SuburbId]);" (0723d8ff)
2025-11-05T17:55:54.4660413+02:00  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PrescribedMedications] ADD CONSTRAINT [FK_PrescribedMedications_Medications_MedicationId] FOREIGN KEY ([MedicationId]) REFERENCES [Medications] ([MedicationId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:54.4699633+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [PrescribedMedications] ADD CONSTRAINT [FK_PrescribedMedications_Prescriptions_PrescriptionId] FOREIGN KEY ([PrescriptionId]) REFERENCES [Prescriptions] ([PrescriptionId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:54.4754692+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Suburbs] ADD CONSTRAINT [FK_Suburbs_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([CityId]) ON DELETE CASCADE;" (0723d8ff)
2025-11-05T17:55:54.4779919+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251105154721_addNavProperty', N'8.0.0');" (0723d8ff)
2025-11-05T19:37:28.2596283+02:00  [INF] User profile is available. Using '"C:\Users\ThatoTs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-11-05T19:37:28.5158989+02:00  [INF] Now listening on: "https://localhost:7150" (d826f4b8)
2025-11-05T19:37:28.5174032+02:00  [INF] Now listening on: "http://localhost:5031" (d826f4b8)
2025-11-05T19:37:28.5579333+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-11-05T19:37:28.5597643+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-11-05T19:37:28.5611563+02:00  [INF] Content root path: "D:\HomeSpace\E_Prescribing_API\E_Prescribing_API" (cc26f24e)
2025-11-05T19:37:29.5033851+02:00 0HNGSI7UQSN0O:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - null null (d509f86a)
2025-11-05T19:37:29.6982753+02:00 0HNGSI7UQSN0O:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - 301 0 null 202.442ms (74253ad3)
2025-11-05T19:37:29.7106034+02:00 0HNGSI7UQSN0O:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - null null (d509f86a)
2025-11-05T19:37:29.8070320+02:00 0HNGSI7UQSN0O:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 96.5533ms (74253ad3)
2025-11-05T19:37:29.8742882+02:00 0HNGSI7UQSN0O:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-11-05T19:37:29.8848447+02:00 0HNGSI7UQSN0O:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - 200 13770 "application/javascript; charset=utf-8" 10.5205ms (74253ad3)
2025-11-05T19:37:29.8850260+02:00 0HNGSI7UQSN0O:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - null null (d509f86a)
2025-11-05T19:37:29.8889977+02:00 0HNGSI7UQSN0O:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - null null (d509f86a)
2025-11-05T19:37:29.9063337+02:00 0HNGSI7UQSN0O:00000009 [INF] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T19:37:29.9065505+02:00 0HNGSI7UQSN0O:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 21.5039ms (74253ad3)
2025-11-05T19:37:29.9511157+02:00 0HNGSI7UQSN0O:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 62.5371ms (74253ad3)
2025-11-05T19:37:30.0137035+02:00 0HNGSI7UQSN0O:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-16x16.png""" - null null (d509f86a)
2025-11-05T19:37:30.0156286+02:00 0HNGSI7UQSN0O:0000000D [INF] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T19:37:30.0158285+02:00 0HNGSI7UQSN0O:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-16x16.png""" - 200 665 "image/png" 2.5612ms (74253ad3)
2025-11-05T19:37:30.0720224+02:00 0HNGSI7UQSN0O:0000000F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-11-05T19:37:30.2286727+02:00 0HNGSI7UQSN0O:0000000F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 156.6865ms (74253ad3)
2025-11-05T19:37:43.7042757+02:00 0HNGSI7UQSN0O:00000011 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1497 (d509f86a)
2025-11-05T19:37:43.7086578+02:00 0HNGSI7UQSN0O:00000011 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T19:37:43.7364079+02:00 0HNGSI7UQSN0O:00000011 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T19:37:44.1631554+02:00 0HNGSI7UQSN0O:00000011 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T19:37:44.1895332+02:00 0HNGSI7UQSN0O:00000011 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 448.9123ms (afa2e885)
2025-11-05T19:37:44.1896574+02:00 0HNGSI7UQSN0O:00000011 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T19:37:44.1929591+02:00 0HNGSI7UQSN0O:00000011 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 488.9245ms (74253ad3)
2025-11-05T19:45:41.9960785+02:00 0HNGSI7UQSN0P:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12339 (d509f86a)
2025-11-05T19:45:42.0014629+02:00 0HNGSI7UQSN0P:00000003 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T19:45:42.0026559+02:00 0HNGSI7UQSN0P:00000003 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T19:45:42.0582692+02:00 0HNGSI7UQSN0P:00000003 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T19:45:42.0587371+02:00 0HNGSI7UQSN0P:00000003 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 55.9896ms (afa2e885)
2025-11-05T19:45:42.0588066+02:00 0HNGSI7UQSN0P:00000003 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T19:45:42.0589549+02:00 0HNGSI7UQSN0P:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 63.1767ms (74253ad3)
2025-11-05T19:47:34.7143393+02:00 0HNGSI7UQSN0P:00000005 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12339 (d509f86a)
2025-11-05T19:47:34.7148419+02:00 0HNGSI7UQSN0P:00000005 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T19:47:34.7149664+02:00 0HNGSI7UQSN0P:00000005 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T19:47:34.7232842+02:00 0HNGSI7UQSN0P:00000005 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T19:47:34.7234927+02:00 0HNGSI7UQSN0P:00000005 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 8.4941ms (afa2e885)
2025-11-05T19:47:34.7235318+02:00 0HNGSI7UQSN0P:00000005 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T19:47:34.7236028+02:00 0HNGSI7UQSN0P:00000005 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 9.7561ms (74253ad3)
2025-11-05T19:47:52.4936103+02:00 0HNGSI7UQSN0P:00000007 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12484 (d509f86a)
2025-11-05T19:47:52.4939662+02:00 0HNGSI7UQSN0P:00000007 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T19:47:52.4941138+02:00 0HNGSI7UQSN0P:00000007 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T19:47:52.4962199+02:00 0HNGSI7UQSN0P:00000007 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T19:47:52.4965047+02:00 0HNGSI7UQSN0P:00000007 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 2.3384ms (afa2e885)
2025-11-05T19:47:52.4965416+02:00 0HNGSI7UQSN0P:00000007 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T19:47:52.4966355+02:00 0HNGSI7UQSN0P:00000007 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 3.7608ms (74253ad3)
2025-11-05T19:48:11.7191786+02:00 0HNGSI7UQSN0P:00000009 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12484 (d509f86a)
2025-11-05T19:48:11.7196804+02:00 0HNGSI7UQSN0P:00000009 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T19:48:11.7198220+02:00 0HNGSI7UQSN0P:00000009 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T19:48:11.7209915+02:00 0HNGSI7UQSN0P:00000009 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T19:48:11.7212578+02:00 0HNGSI7UQSN0P:00000009 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 1.4012ms (afa2e885)
2025-11-05T19:48:11.7212866+02:00 0HNGSI7UQSN0P:00000009 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T19:48:11.7213411+02:00 0HNGSI7UQSN0P:00000009 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 2.3251ms (74253ad3)
2025-11-05T19:48:23.2048881+02:00 0HNGSI7UQSN0P:0000000B [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12484 (d509f86a)
2025-11-05T19:48:23.2055003+02:00 0HNGSI7UQSN0P:0000000B [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T19:48:23.2062004+02:00 0HNGSI7UQSN0P:0000000B [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T19:48:23.2106607+02:00 0HNGSI7UQSN0P:0000000B [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T19:48:23.2109026+02:00 0HNGSI7UQSN0P:0000000B [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 4.6411ms (afa2e885)
2025-11-05T19:48:23.2109415+02:00 0HNGSI7UQSN0P:0000000B [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T19:48:23.2110478+02:00 0HNGSI7UQSN0P:0000000B [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 6.2118ms (74253ad3)
2025-11-05T19:49:29.6081251+02:00 0HNGSI7UQSN0P:0000000D [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12484 (d509f86a)
2025-11-05T19:49:29.6083535+02:00 0HNGSI7UQSN0P:0000000D [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T19:49:29.6084519+02:00 0HNGSI7UQSN0P:0000000D [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T19:49:29.6103148+02:00 0HNGSI7UQSN0P:0000000D [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T19:49:29.6104477+02:00 0HNGSI7UQSN0P:0000000D [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 1.9734ms (afa2e885)
2025-11-05T19:49:29.6104646+02:00 0HNGSI7UQSN0P:0000000D [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T19:49:29.6105533+02:00 0HNGSI7UQSN0P:0000000D [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 2.8375ms (74253ad3)
2025-11-05T19:51:23.2031755+02:00 0HNGSI7UQSN0P:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12340 (d509f86a)
2025-11-05T19:51:23.2064895+02:00 0HNGSI7UQSN0P:0000000F [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T19:51:23.2065836+02:00 0HNGSI7UQSN0P:0000000F [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T19:51:23.2087655+02:00 0HNGSI7UQSN0P:0000000F [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T19:51:23.2089481+02:00 0HNGSI7UQSN0P:0000000F [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 2.2952ms (afa2e885)
2025-11-05T19:51:23.2090019+02:00 0HNGSI7UQSN0P:0000000F [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T19:51:23.2090713+02:00 0HNGSI7UQSN0P:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 5.9628ms (74253ad3)
2025-11-05T19:56:12.8847049+02:00 0HNGSI7UQSN0Q:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 650 (d509f86a)
2025-11-05T19:56:12.8849960+02:00 0HNGSI7UQSN0Q:00000003 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T19:56:12.8851085+02:00 0HNGSI7UQSN0Q:00000003 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T19:56:12.8912749+02:00 0HNGSI7UQSN0Q:00000003 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T19:56:12.8914570+02:00 0HNGSI7UQSN0Q:00000003 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 6.3239ms (afa2e885)
2025-11-05T19:56:12.8914807+02:00 0HNGSI7UQSN0Q:00000003 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T19:56:12.8916228+02:00 0HNGSI7UQSN0Q:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 7.4016ms (74253ad3)
2025-11-05T19:56:49.9332708+02:00 0HNGSI7UQSN0Q:00000005 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 650 (d509f86a)
2025-11-05T19:56:49.9335460+02:00 0HNGSI7UQSN0Q:00000005 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T19:56:49.9336403+02:00 0HNGSI7UQSN0Q:00000005 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T19:56:49.9342590+02:00 0HNGSI7UQSN0Q:00000005 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T19:56:49.9344121+02:00 0HNGSI7UQSN0Q:00000005 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 0.752ms (afa2e885)
2025-11-05T19:56:49.9344334+02:00 0HNGSI7UQSN0Q:00000005 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T19:56:49.9345072+02:00 0HNGSI7UQSN0Q:00000005 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 1.595ms (74253ad3)
2025-11-05T19:57:26.9896032+02:00 0HNGSI7UQSN0Q:00000007 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 1497 (d509f86a)
2025-11-05T19:57:26.9908339+02:00 0HNGSI7UQSN0Q:00000007 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T19:57:26.9933820+02:00 0HNGSI7UQSN0Q:00000007 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T19:57:26.9966052+02:00 0HNGSI7UQSN0Q:00000007 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T19:57:26.9968429+02:00 0HNGSI7UQSN0Q:00000007 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 3.3818ms (afa2e885)
2025-11-05T19:57:26.9969185+02:00 0HNGSI7UQSN0Q:00000007 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T19:57:26.9970184+02:00 0HNGSI7UQSN0Q:00000007 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 7.563ms (74253ad3)
2025-11-05T19:57:43.4322813+02:00 0HNGSI7UQSN0Q:00000009 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12484 (d509f86a)
2025-11-05T19:57:43.4325361+02:00 0HNGSI7UQSN0Q:00000009 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T19:57:43.4326368+02:00 0HNGSI7UQSN0Q:00000009 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T19:57:43.4344735+02:00 0HNGSI7UQSN0Q:00000009 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T19:57:43.4347530+02:00 0HNGSI7UQSN0Q:00000009 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 2.0758ms (afa2e885)
2025-11-05T19:57:43.4347860+02:00 0HNGSI7UQSN0Q:00000009 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T19:57:43.4348696+02:00 0HNGSI7UQSN0Q:00000009 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 3.1274ms (74253ad3)
2025-11-05T19:59:27.3570113+02:00 0HNGSI7UQSN0Q:0000000B [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12484 (d509f86a)
2025-11-05T19:59:27.3573727+02:00 0HNGSI7UQSN0Q:0000000B [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T19:59:27.3574572+02:00 0HNGSI7UQSN0Q:0000000B [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T19:59:27.3625099+02:00 0HNGSI7UQSN0Q:0000000B [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T19:59:27.3626687+02:00 0HNGSI7UQSN0Q:0000000B [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 5.1946ms (afa2e885)
2025-11-05T19:59:27.3626946+02:00 0HNGSI7UQSN0Q:0000000B [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T19:59:27.3627562+02:00 0HNGSI7UQSN0Q:0000000B [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 6.016ms (74253ad3)
2025-11-05T20:00:16.8503383+02:00 0HNGSI7UQSN0Q:0000000D [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12341 (d509f86a)
2025-11-05T20:00:16.8656124+02:00 0HNGSI7UQSN0Q:0000000D [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:00:16.8657329+02:00 0HNGSI7UQSN0Q:0000000D [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:00:16.8682214+02:00 0HNGSI7UQSN0Q:0000000D [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:00:16.8684529+02:00 0HNGSI7UQSN0Q:0000000D [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 2.6935ms (afa2e885)
2025-11-05T20:00:16.8685057+02:00 0HNGSI7UQSN0Q:0000000D [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:00:16.8686146+02:00 0HNGSI7UQSN0Q:0000000D [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 18.3686ms (74253ad3)
2025-11-05T20:01:16.8275650+02:00 0HNGSI7UQSN0Q:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12342 (d509f86a)
2025-11-05T20:01:16.8278352+02:00 0HNGSI7UQSN0Q:0000000F [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:01:16.8279193+02:00 0HNGSI7UQSN0Q:0000000F [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:01:16.8291109+02:00 0HNGSI7UQSN0Q:0000000F [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:01:16.8292855+02:00 0HNGSI7UQSN0Q:0000000F [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 1.3474ms (afa2e885)
2025-11-05T20:01:16.8293129+02:00 0HNGSI7UQSN0Q:0000000F [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:01:16.8293593+02:00 0HNGSI7UQSN0Q:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 2.3462ms (74253ad3)
2025-11-05T20:01:31.2528071+02:00 0HNGSI7UQSN0Q:00000011 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12341 (d509f86a)
2025-11-05T20:01:31.2532069+02:00 0HNGSI7UQSN0Q:00000011 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:01:31.2532872+02:00 0HNGSI7UQSN0Q:00000011 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:01:31.2547376+02:00 0HNGSI7UQSN0Q:00000011 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:01:31.2549039+02:00 0HNGSI7UQSN0Q:00000011 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 1.5897ms (afa2e885)
2025-11-05T20:01:31.2549285+02:00 0HNGSI7UQSN0Q:00000011 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:01:31.2550020+02:00 0HNGSI7UQSN0Q:00000011 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 2.7201ms (74253ad3)
2025-11-05T20:02:17.1196011+02:00 0HNGSI7UQSN0Q:00000013 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12341 (d509f86a)
2025-11-05T20:02:17.1198098+02:00 0HNGSI7UQSN0Q:00000013 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:02:17.1214648+02:00 0HNGSI7UQSN0Q:00000013 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:02:17.1266763+02:00 0HNGSI7UQSN0Q:00000013 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:02:17.1269866+02:00 0HNGSI7UQSN0Q:00000013 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 4.9806ms (afa2e885)
2025-11-05T20:02:17.1270151+02:00 0HNGSI7UQSN0Q:00000013 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:02:17.1270702+02:00 0HNGSI7UQSN0Q:00000013 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 8.2265ms (74253ad3)
2025-11-05T20:04:11.8297115+02:00 0HNGSI7UQSN0Q:00000015 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 561 (d509f86a)
2025-11-05T20:04:11.8299618+02:00 0HNGSI7UQSN0Q:00000015 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:04:11.8300643+02:00 0HNGSI7UQSN0Q:00000015 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:04:11.8306690+02:00 0HNGSI7UQSN0Q:00000015 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:04:11.8308221+02:00 0HNGSI7UQSN0Q:00000015 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 0.7147ms (afa2e885)
2025-11-05T20:04:11.8308391+02:00 0HNGSI7UQSN0Q:00000015 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:04:11.8308939+02:00 0HNGSI7UQSN0Q:00000015 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 1.2422ms (74253ad3)
2025-11-05T20:05:16.2196993+02:00 0HNGSI7UQSN0Q:00000017 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 477 (d509f86a)
2025-11-05T20:05:16.2199568+02:00 0HNGSI7UQSN0Q:00000017 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:05:16.2200575+02:00 0HNGSI7UQSN0Q:00000017 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:05:16.2207810+02:00 0HNGSI7UQSN0Q:00000017 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:05:16.2209173+02:00 0HNGSI7UQSN0Q:00000017 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 0.828ms (afa2e885)
2025-11-05T20:05:16.2209345+02:00 0HNGSI7UQSN0Q:00000017 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:05:16.2210088+02:00 0HNGSI7UQSN0Q:00000017 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 1.5128ms (74253ad3)
2025-11-05T20:05:37.5411681+02:00 0HNGSI7UQSN0Q:00000019 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12341 (d509f86a)
2025-11-05T20:05:37.5415201+02:00 0HNGSI7UQSN0Q:00000019 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:05:37.5416227+02:00 0HNGSI7UQSN0Q:00000019 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:05:37.5428796+02:00 0HNGSI7UQSN0Q:00000019 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:05:37.5430157+02:00 0HNGSI7UQSN0Q:00000019 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 1.3744ms (afa2e885)
2025-11-05T20:05:37.5430347+02:00 0HNGSI7UQSN0Q:00000019 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:05:37.5430847+02:00 0HNGSI7UQSN0Q:00000019 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 3.0793ms (74253ad3)
2025-11-05T20:06:14.0580633+02:00 0HNGSI7UQSN0Q:0000001B [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12341 (d509f86a)
2025-11-05T20:06:14.0614512+02:00 0HNGSI7UQSN0Q:0000001B [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:06:14.0615357+02:00 0HNGSI7UQSN0Q:0000001B [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:06:14.0633111+02:00 0HNGSI7UQSN0Q:0000001B [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:06:14.0634584+02:00 0HNGSI7UQSN0Q:0000001B [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 1.8944ms (afa2e885)
2025-11-05T20:06:14.0634811+02:00 0HNGSI7UQSN0Q:0000001B [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:06:14.0635456+02:00 0HNGSI7UQSN0Q:0000001B [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 5.5269ms (74253ad3)
2025-11-05T20:06:44.0631853+02:00 0HNGSI7UQSN0Q:0000001D [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - "application/json" 12341 (d509f86a)
2025-11-05T20:06:44.0633870+02:00 0HNGSI7UQSN0Q:0000001D [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:06:44.0634720+02:00 0HNGSI7UQSN0Q:0000001D [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:06:44.0648211+02:00 0HNGSI7UQSN0Q:0000001D [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:06:44.0649647+02:00 0HNGSI7UQSN0Q:0000001D [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 1.4638ms (afa2e885)
2025-11-05T20:06:44.0649864+02:00 0HNGSI7UQSN0Q:0000001D [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:06:44.0650579+02:00 0HNGSI7UQSN0Q:0000001D [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription""" - 400 null "application/problem+json; charset=utf-8" 1.9229ms (74253ad3)
2025-11-05T20:09:11.7042491+02:00  [INF] User profile is available. Using '"C:\Users\ThatoTs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-11-05T20:09:11.9125827+02:00  [INF] Now listening on: "https://localhost:7150" (d826f4b8)
2025-11-05T20:09:11.9142111+02:00  [INF] Now listening on: "http://localhost:5031" (d826f4b8)
2025-11-05T20:09:11.9517737+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-11-05T20:09:11.9537133+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-11-05T20:09:11.9564483+02:00  [INF] Content root path: "D:\HomeSpace\E_Prescribing_API\E_Prescribing_API" (cc26f24e)
2025-11-05T20:09:13.0755755+02:00 0HNGSIPM474GO:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - null null (d509f86a)
2025-11-05T20:09:13.2841658+02:00 0HNGSIPM474GO:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - 301 0 null 215.1879ms (74253ad3)
2025-11-05T20:09:13.3288684+02:00 0HNGSIPM474GO:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - null null (d509f86a)
2025-11-05T20:09:13.4372778+02:00 0HNGSIPM474GO:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 108.5975ms (74253ad3)
2025-11-05T20:09:13.5231823+02:00 0HNGSIPM474GO:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-11-05T20:09:13.5306967+02:00 0HNGSIPM474GO:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - 200 13770 "application/javascript; charset=utf-8" 7.7735ms (74253ad3)
2025-11-05T20:09:13.5323659+02:00 0HNGSIPM474GO:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - null null (d509f86a)
2025-11-05T20:09:13.5337971+02:00 0HNGSIPM474GO:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - null null (d509f86a)
2025-11-05T20:09:13.5528942+02:00 0HNGSIPM474GO:00000009 [INF] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T20:09:13.5531077+02:00 0HNGSIPM474GO:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 20.7942ms (74253ad3)
2025-11-05T20:09:13.5896211+02:00 0HNGSIPM474GO:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 56.2528ms (74253ad3)
2025-11-05T20:09:13.6724684+02:00 0HNGSIPM474GO:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-16x16.png""" - null null (d509f86a)
2025-11-05T20:09:13.6741021+02:00 0HNGSIPM474GO:0000000D [INF] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T20:09:13.6742538+02:00 0HNGSIPM474GO:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-16x16.png""" - 499 665 "image/png" 1.8812ms (74253ad3)
2025-11-05T20:09:13.7172191+02:00 0HNGSIPM474GO:0000000F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-11-05T20:09:13.8707280+02:00 0HNGSIPM474GO:0000000F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 154.2793ms (74253ad3)
2025-11-05T20:09:59.0723982+02:00  [INF] User profile is available. Using '"C:\Users\ThatoTs\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2025-11-05T20:09:59.3421089+02:00  [INF] Now listening on: "https://localhost:7150" (d826f4b8)
2025-11-05T20:09:59.3438935+02:00  [INF] Now listening on: "http://localhost:5031" (d826f4b8)
2025-11-05T20:09:59.3953968+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-11-05T20:09:59.3977218+02:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-11-05T20:09:59.4000178+02:00  [INF] Content root path: "D:\HomeSpace\E_Prescribing_API\E_Prescribing_API" (cc26f24e)
2025-11-05T20:10:00.8253683+02:00 0HNGSIQ49N924:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - null null (d509f86a)
2025-11-05T20:10:01.0703817+02:00 0HNGSIQ49N924:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger""" - 301 0 null 254.4896ms (74253ad3)
2025-11-05T20:10:01.0860757+02:00 0HNGSIQ49N924:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - null null (d509f86a)
2025-11-05T20:10:01.1996488+02:00 0HNGSIQ49N924:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 113.6807ms (74253ad3)
2025-11-05T20:10:01.2725873+02:00 0HNGSIQ49N924:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2025-11-05T20:10:01.2784396+02:00 0HNGSIQ49N924:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_framework/aspnetcore-browser-refresh.js""" - 200 13770 "application/javascript; charset=utf-8" 6.2379ms (74253ad3)
2025-11-05T20:10:01.2873907+02:00 0HNGSIQ49N924:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - null null (d509f86a)
2025-11-05T20:10:01.2886894+02:00 0HNGSIQ49N924:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - null null (d509f86a)
2025-11-05T20:10:01.3137728+02:00 0HNGSIQ49N924:00000009 [INF] Sending file. Request path: '"/swagger-ui.css"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T20:10:01.3139865+02:00 0HNGSIQ49N924:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/swagger-ui.css""" - 499 152034 "text/css" 26.6643ms (74253ad3)
2025-11-05T20:10:01.3558744+02:00 0HNGSIQ49N924:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 67.4109ms (74253ad3)
2025-11-05T20:10:02.6696142+02:00 0HNGSIQ49N924:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-16x16.png""" - null null (d509f86a)
2025-11-05T20:10:02.6698349+02:00 0HNGSIQ49N924:0000000F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - null null (d509f86a)
2025-11-05T20:10:02.6716238+02:00 0HNGSIQ49N924:0000000D [INF] Sending file. Request path: '"/favicon-16x16.png"'. Physical path: '"N/A"' (27b0a520)
2025-11-05T20:10:02.6718567+02:00 0HNGSIQ49N924:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/favicon-16x16.png""" - 499 665 "image/png" 2.6658ms (74253ad3)
2025-11-05T20:10:02.7999195+02:00 0HNGSIQ49N924:0000000F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7150""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 130.5156ms (74253ad3)
2025-11-05T20:13:40.7115403+02:00 0HNGSIQ49N925:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - "application/json" 477 (d509f86a)
2025-11-05T20:13:40.7166150+02:00 0HNGSIQ49N925:00000003 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:13:40.7391665+02:00 0HNGSIQ49N925:00000003 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:13:40.9596823+02:00 0HNGSIQ49N925:00000003 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:13:40.9723424+02:00 0HNGSIQ49N925:00000003 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 229.6636ms (afa2e885)
2025-11-05T20:13:40.9724315+02:00 0HNGSIQ49N925:00000003 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:13:40.9743960+02:00 0HNGSIQ49N925:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - 400 null "application/problem+json; charset=utf-8" 262.9111ms (74253ad3)
2025-11-05T20:14:17.5635600+02:00 0HNGSIQ49N925:00000005 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - "application/json" 477 (d509f86a)
2025-11-05T20:14:17.5651109+02:00 0HNGSIQ49N925:00000005 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:14:17.5654789+02:00 0HNGSIQ49N925:00000005 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:14:17.5729868+02:00 0HNGSIQ49N925:00000005 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:14:17.5735500+02:00 0HNGSIQ49N925:00000005 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 7.9653ms (afa2e885)
2025-11-05T20:14:17.5736224+02:00 0HNGSIQ49N925:00000005 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:14:17.5738401+02:00 0HNGSIQ49N925:00000005 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - 400 null "application/problem+json; charset=utf-8" 10.5079ms (74253ad3)
2025-11-05T20:20:56.7165615+02:00 0HNGSIQ49N926:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - "application/json" 12339 (d509f86a)
2025-11-05T20:20:56.7170926+02:00 0HNGSIQ49N926:00000003 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:20:56.7179048+02:00 0HNGSIQ49N926:00000003 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:20:56.7445851+02:00 0HNGSIQ49N926:00000003 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:20:56.7448316+02:00 0HNGSIQ49N926:00000003 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 26.8663ms (afa2e885)
2025-11-05T20:20:56.7448675+02:00 0HNGSIQ49N926:00000003 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:20:56.7449708+02:00 0HNGSIQ49N926:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - 400 null "application/problem+json; charset=utf-8" 28.5517ms (74253ad3)
2025-11-05T20:31:46.3122222+02:00 0HNGSIQ49N927:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - "application/json" 12339 (d509f86a)
2025-11-05T20:31:46.3129013+02:00 0HNGSIQ49N927:00000003 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:31:46.3133902+02:00 0HNGSIQ49N927:00000003 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:31:46.3203280+02:00 0HNGSIQ49N927:00000003 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:31:46.3205346+02:00 0HNGSIQ49N927:00000003 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 7.1045ms (afa2e885)
2025-11-05T20:31:46.3205631+02:00 0HNGSIQ49N927:00000003 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:31:46.3206358+02:00 0HNGSIQ49N927:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - 400 null "application/problem+json; charset=utf-8" 8.7667ms (74253ad3)
2025-11-05T20:32:19.8039280+02:00 0HNGSIQ49N927:00000005 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - "application/json" 12340 (d509f86a)
2025-11-05T20:32:19.8048814+02:00 0HNGSIQ49N927:00000005 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:32:19.8411013+02:00 0HNGSIQ49N927:00000005 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:32:19.8439892+02:00 0HNGSIQ49N927:00000005 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:32:19.8442621+02:00 0HNGSIQ49N927:00000005 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 3.1125ms (afa2e885)
2025-11-05T20:32:19.8443042+02:00 0HNGSIQ49N927:00000005 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:32:19.8445522+02:00 0HNGSIQ49N927:00000005 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - 400 null "application/problem+json; charset=utf-8" 40.6511ms (74253ad3)
2025-11-05T20:34:15.0401538+02:00 0HNGSIQ49N927:00000007 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - "application/json" 12340 (d509f86a)
2025-11-05T20:34:15.0404400+02:00 0HNGSIQ49N927:00000007 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:34:15.0405365+02:00 0HNGSIQ49N927:00000007 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:34:15.0421592+02:00 0HNGSIQ49N927:00000007 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:34:15.0423446+02:00 0HNGSIQ49N927:00000007 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 1.6856ms (afa2e885)
2025-11-05T20:34:15.0423718+02:00 0HNGSIQ49N927:00000007 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:34:15.0424419+02:00 0HNGSIQ49N927:00000007 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - 400 null "application/problem+json; charset=utf-8" 2.6167ms (74253ad3)
2025-11-05T20:35:05.5127917+02:00 0HNGSIQ49N927:00000009 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - "application/json" 12340 (d509f86a)
2025-11-05T20:35:05.5130994+02:00 0HNGSIQ49N927:00000009 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:35:05.5146654+02:00 0HNGSIQ49N927:00000009 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:35:05.5178883+02:00 0HNGSIQ49N927:00000009 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:35:05.5180538+02:00 0HNGSIQ49N927:00000009 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 3.2767ms (afa2e885)
2025-11-05T20:35:05.5180760+02:00 0HNGSIQ49N927:00000009 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:35:05.5181331+02:00 0HNGSIQ49N927:00000009 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - 400 null "application/problem+json; charset=utf-8" 6.1273ms (74253ad3)
2025-11-05T20:35:23.1575732+02:00 0HNGSIQ49N927:0000000B [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - "application/json" 12340 (d509f86a)
2025-11-05T20:35:23.1578460+02:00 0HNGSIQ49N927:0000000B [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:35:23.1579350+02:00 0HNGSIQ49N927:0000000B [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:35:23.1595180+02:00 0HNGSIQ49N927:0000000B [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:35:23.1596613+02:00 0HNGSIQ49N927:0000000B [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 1.6877ms (afa2e885)
2025-11-05T20:35:23.1596852+02:00 0HNGSIQ49N927:0000000B [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:35:23.1597648+02:00 0HNGSIQ49N927:0000000B [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - 400 null "application/problem+json; charset=utf-8" 2.5355ms (74253ad3)
2025-11-05T20:40:36.5936889+02:00 0HNGSIQ49N928:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - "application/json" 12344 (d509f86a)
2025-11-05T20:40:36.5979311+02:00 0HNGSIQ49N928:00000003 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:40:36.5989292+02:00 0HNGSIQ49N928:00000003 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:40:36.6018861+02:00 0HNGSIQ49N928:00000003 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:40:36.6020464+02:00 0HNGSIQ49N928:00000003 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 3.0652ms (afa2e885)
2025-11-05T20:40:36.6020941+02:00 0HNGSIQ49N928:00000003 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:40:36.6021561+02:00 0HNGSIQ49N928:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - 400 null "application/problem+json; charset=utf-8" 9.2008ms (74253ad3)
2025-11-05T20:43:09.1374829+02:00 0HNGSIQ49N928:00000005 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - "application/json" 12344 (d509f86a)
2025-11-05T20:43:09.1384715+02:00 0HNGSIQ49N928:00000005 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:43:09.1399338+02:00 0HNGSIQ49N928:00000005 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:43:09.1417837+02:00 0HNGSIQ49N928:00000005 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:43:09.1419120+02:00 0HNGSIQ49N928:00000005 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 1.9569ms (afa2e885)
2025-11-05T20:43:09.1419295+02:00 0HNGSIQ49N928:00000005 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:43:09.1419845+02:00 0HNGSIQ49N928:00000005 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - 400 null "application/problem+json; charset=utf-8" 4.5751ms (74253ad3)
2025-11-05T20:43:59.2679105+02:00 0HNGSIQ49N928:00000007 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - "application/json" 12345 (d509f86a)
2025-11-05T20:43:59.2708757+02:00 0HNGSIQ49N928:00000007 [INF] Executing endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (500cc934)
2025-11-05T20:43:59.2722055+02:00 0HNGSIQ49N928:00000007 [INF] Route matched with "{action = \"PrescribeMedication\", controller = \"Prescription\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PrescribeMedication(E_Prescribing_API.CollectionModel.PrescriptionCollection)" on controller "E_Prescribing_API.Controllers.PrescriptionController" ("E_Prescribing_API"). (122b2fdf)
2025-11-05T20:43:59.2750005+02:00 0HNGSIQ49N928:00000007 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2025-11-05T20:43:59.2752816+02:00 0HNGSIQ49N928:00000007 [INF] Executed action "E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)" in 3.0289ms (afa2e885)
2025-11-05T20:43:59.2753131+02:00 0HNGSIQ49N928:00000007 [INF] Executed endpoint '"E_Prescribing_API.Controllers.PrescriptionController.PrescribeMedication (E_Prescribing_API)"' (99874f2b)
2025-11-05T20:43:59.2753758+02:00 0HNGSIQ49N928:00000007 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7150""""/api/Prescription/PrescribeMedication""" - 400 null "application/problem+json; charset=utf-8" 7.6397ms (74253ad3)
2025-11-05T20:45:58.9706358+02:00  [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T20:45:58.9895907+02:00  [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T20:45:58.9916967+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2025-11-05T20:45:58.9927340+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');" (0723d8ff)
2025-11-05T20:45:59.0028696+02:00  [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];" (0723d8ff)
2025-11-05T20:45:59.0123133+02:00  [INF] Applying migration '"20251105184531_removefa"'. (0e2ac64d)
2025-11-05T20:45:59.0666160+02:00  [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""ALTER TABLE [Patients] DROP CONSTRAINT [FK_Patients_MedicalStaffs_MedicalStaffId];" (0723d8ff)
2025-11-05T20:45:59.0742226+02:00  [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DROP INDEX [IX_Patients_MedicalStaffId] ON [Patients];" (0723d8ff)
2025-11-05T20:45:59.1262325+02:00  [INF] Executed DbCommand ("52"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'MedicalStaffId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Patients] DROP COLUMN [MedicalStaffId];" (0723d8ff)
2025-11-05T20:45:59.1288184+02:00  [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251105184531_removefa', N'8.0.0');" (0723d8ff)
